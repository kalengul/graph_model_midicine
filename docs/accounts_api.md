# API Авторизации
## Назначение
Получение токена доступа для API-запросов

## URL
```POST api/v1/login/```

## Аутентификация
Не требуется

## Вход
|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|username|String|да|Логин пользователя (username)|
|password|String|да|Пароль|

### Пример входных данных
```json
{
    "username": "staff1",
    "password": "qwerty123"
}

## Выход
| **Параметр** | **Тип данных** | **Обязательность** | **Описание**                                      |
| :----------: | :------------- | :----------------- | :------------------------------------------------ |
|     token    | String         | да                 | Токен доступа (используется как Bearer Token)     |
|   username   | String         | да                 | Имя пользователя                                  |
|     role     | String         | да                 | Роль пользователя (superuser, staff или no\_role) |


### Статусы ответа
200 — Авторизация успешна<br/>
401 — Неверные учетные данные<br/>
400 — Отсутствует логин или пароль<br/>

### Пример успешного ответа
```json
{
    "result": {
        "status": 200,
        "message": "Авторизация прошла успешно"
    },
    "data": {
        "token": "48a22aa3a719bc8724fa36d5b1a...",
        "username": "staff1",
        "role": "staff"
    }
}
```

### Пример неуспешного ответа
```json
{
    "result": {
        "status": 401,
        "message": "Неверные учетные данные"
    },
    "data": {}
}
```

---

# API Выхода из системы
## Назначение
Удаление токена доступа текущего пользователя

## URL
```POST api/v1/logout/```

## Аутентификация
Не требуется (токен можно передать, но это не обязательно)

## Вход
Не принимает параметры

### Пример запроса
```
POST /api/v1/accounts/logout/
Authorization: Bearer 48a22aa3a719bc8724fa36d5b1a...
```

## Выход
|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|message|String|да|Сообщение об успешном выходе|

### Статусы ответа
200 — Выход успешен<br/>

### Пример успешного ответа
```json
{
    "result": {
        "status": 200,
        "message": "Выход выполнен успешно"
    },
    "data": {}
}
```

---

# API Проверки токена
## Назначение
Проверка валидности Bearer-токена и соответствия имени пользователя

## URL
```POST api/v1/check_token/```

## Аутентификация
Требуется (в заголовке передаётся Bearer Token)

## Вход
|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|username|String|да|Имя пользователя, к которому должен принадлежать токен|

### Пример входных данных
```json
{
    "username": "staff1"
}
```

### Пример запроса
```
POST /api/v1/accounts/check_token/
Authorization: Bearer 48a22aa3a719bc8724fa36d5b1a...
```

## Выход
|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|username|String|да|Имя пользователя, которому принадлежит токен|

### Статусы ответа
200 — Токен валиден и принадлежит пользователю<br/>
400 — Не передано имя пользователя<br/>
401 — Токен отсутствует или недействителен<br/>
403 — Имя пользователя не соответствует токену<br/>

### Пример успешного ответа
```json
{
    "result": {
        "status": 200,
        "message": "Токен валиден и принадлежит пользователю"
    },
    "data": {
        "username": "staff1"
    }
}
```

### Пример неуспешного ответа (несовпадение username и токена)
```json
{
    "result": {
        "status": 403,
        "message": "Имя пользователя не соответствует токену"
    },
    "data": {}
}
```

### Пример неуспешного ответа (токен отсутствует)
```json
{
    "result": {
        "status": 401,
        "message": "Учетные данные не были предоставлены."
    },
    "data": {}
}
```
