# API Для расчета взаимодействия по MedScape
## Назначение
Расчет совместимости ЛС по MedScape
## URL
```GET api/v1/iteraction_medscape/?drugs=[список лс для расчета]```
## Аутентификация
Не требуется
## Вход
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|druds|Array(integer)|да|массив id ЛС|
### Пример входныйх данных
```GET api/v1/iteraction_medscape/?drugs=[1, 2]```

## Выход
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|compatibility_medscape|String|да|Код результата оценки совместимости|
|description|String|да|Описание из инструкции|
|drugs|Array(String)|да|Список названий проверяемых ЛС|

Допустимые значения `compatibility_medscape`<br/>
`compatible` - Совместимы, <br/>
`incompatible` - Несовместимы,  <br/>
`caution` - С осторожностью <br/>

### Статусы ответа
200 - Совместимость ЛС по MedScape успешно расcчитана<br/>
400 - Лекарственное средство – [название лс] не найдено<br/>
404 - Ресурс не найден<br/>
500 - Ошибка определения совместимости<br/>

### Пример выходныйх данных при успешном ответе
```json
{
    "result": {
        "status": 200, 
        "message": "Совместимость ЛС по MedScape успешно расcчитана"
    },
    "data":{
        "compatibility_medscape": "compatible",
        "description": "Справка из MedScape",
        "drugs": ["амиодарон", "амлодипин"]
    },    
}
```
### Пример выходныйх данных при не успешном ответе
```json
{
    "result": {
        "status": 400, 
        "message": "Лекарственное средство – амиодарон не найдено"
    },
    "data":{ },    
}
```

# API Для расчета взаимодействия по Fortran
## Назначение
Расчет совместимости ЛС по Fortran
## URL
```GET api/v1/polifarmakoterapiya-fortran/?drugs=[список лс для расчета]&?humanData={[Информация о пользователе]}```
## Аутентификация
Не требуется
## Вход
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|druds|Array(integer)|да|массив id ЛС|
|humanData|Obgect|нет|Вспомогательная информация о пользователе|

#### Объект humanData
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|age|Array(string)|да|Информация о фозрастной категории пользователя|

Допустимые значения `age`<br/>
`rangbase.txt` - Общий<br/>
`rangm1.txt` – Мужчины до 65<br/>
`rangf1.txt` – Женщины до 65<br/>
`rangfreq.txt` – Нормальный<br/>
`rangm2.txt` – Мужчины после 65<br/>
`rangf2.txt` – Женщины после 65<br/>
##### Примечание:
Сейчас в возраст записывается информация из старого фортрана, в дальнейшем планируется модификация этого объекта

### Пример входныйх данных
```GET api/v1/polifarmakoterapiya-fortran/?drugs=[1, 2]&?humanData={age: ['rangbase.txt']}```

## Выход
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|сompatibility_fortran|String|да|Код результата оценки совместимости по фортран|
|rank_iteractions|Integer|да|Ранг совместимости по Fortran|
|side_effects|Array[Object]|да|Список побочек с рангами|
|combinations|Array[Object]|да|Применимость комбинации с другими лекарственными средствами|
|compatibility_medscape|String|да|Код результата оценки совместимости|
|description|String|да|Описание из инструкции|
|drugs|Array(String)|да|Список названий проверяемых ЛС|

#### Объект side_effects
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|сompatibility|String|да|Код результата оценки совместимости по фортран|
|effects|Array(Object)|да|Список побочек с рангами с данным кодом совместимости|

#### Объект effects
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|se_name|String|да|Название побочного эффекта|
|rank|Integer|да|Ранг появления|

#### Объект combinations
|**параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|сompatibility|String|да|Код результата оценки совместимости по фортран|
|drugs|Array(String)|да|Список названий ЛС с данным кодом совместимости|

Допустимые значения `compatibility_medscape`, `сompatibility_fortran`, `сompatibility`<br/>
`compatible` - Совместимы, <br/>
`incompatible` - Несовместимы,  <br/>
`caution` - С осторожностью <br/>

### Статусы ответа
200 - Совместимость ЛС по MedScape успешно расcчитана<br/>
400 - Лекарственное средство – [название лс] не найдено<br/>
404 - Ресурс не найден<br/>
500 - Ошибка определения совместимости<br/>

### Пример выходныйх данных при успешном ответе
```json
{
    "result": {
        "status": 200, 
        "message": "Совместимость ЛС по Fortran успешно расcчитана"
    },
    "data":{
        "сompatibility_fortran": "incompatible", 
        "rank_iteractions": 0.9,
        "side_effects": [
            {
                "сompatibility":"compatible",
                "effects": [{
                    "se_name": "брадикардия",
                    "rank": 0.1,
                }]

            }],
        "combinations":[
            {
                "сompatibility":"compatible",
                "drugs": ["амиодарон", "амлодипин"]

            }],
        "compatibility_medscape": "compatible",
        "description": "Справка из MedScape",
        "drugs": ["амиодарон", "амлодипин"]
    },    
}
```
### Пример выходныйх данных при не успешном ответе
```json
{
    "result": {
        "status": 400, 
        "message": "Лекарственное средство – амиодарон не найдено"
    },
    "data":{ },    
}
```

# API Для получения ЛС
## Назначение
Получение одного или группы ЛС
## URL
```GET api/v1/getDrug/?id={id}```
## Аутентификация
Не требуется

## Вход
На вход получает id получаемого ЛС. Если id не указан, то выводится список всех ЛС<br/>

|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|drug_id|integer|нет|id ЛС|

### Пример входныйх данных
Для получение одного ЛС ```GET api/v1/getDrug/?drug_id=1``` <br/>
Для получение списка ЛС ```GET api/v1/getDrug/```

## Выход
На выход выдает список ЛС или информацию о конкретном ЛС<br/>

Выходные данные для одного ЛС<br/>

|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:-------|:--------|:------|
|id|string|да|id ЛС|
|drug_name|string|да|Название ЛС|

Выходные данные для списка ЛС<br/>

|**Праметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----|:--------|:--------|:------|
|drugs|Aray(object)|да|Список объектов ЛС|

### Статусы ответа
200 - ЛС найдено / Списко ЛС получен <br/>
400 - Лекарственное средство не найдено <br/>
500 - Неизвестная ошибка сервера <br/>

### Пример выходныйх данных для группы ЛС
```json
{
    "result": {
        "status": 200, 
        "message": "Список ЛС получен"
    },
    "data": [
        {
            "id": "1",
            "drug_name": "аллопуринол"
        },
        {
            "id": "2",
            "drug_name": "амлодипин"
        },
    ]
}
```

### Пример выходныйх данных для одного ЛС
```json
{
    "result": {
        "status": 200, 
        "message": "ЛС получено"
    },
    "data": {
        "id": "1",
        "drug_name": "аллопуринол"
    }
}
```

# API Для получения побочных эффектов
## Назначение
Получение одного или группы побочных эффектов
## URL
```GET api/v1/getSideEffect/?id={id}```
## Аутентификация
Не требуется

## Вход
На вход получает id получаемого побочного эффекта. Если id не указан, то выводится список всех побочных эффектов<br/>

|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:--------|:--------|:------|
|se_id|integer|нет|id побочного эффекта|

### Пример входныйх данных
Для получение одного побочного эффекта ```GET api/v1/getSideEffect/?se_id=1``` <br/>
Для получение списка побочного эффекта ```GET api/v1/getSideEffect/```

## Выход
На выход выдает список побочных эффектов или информацию о конкретном побочном эффекте<br/>

Выходные данные для одного побочного эффекта<br/>

|**Параметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----:|:-------|:--------|:------|
|id|string|да|id побочного эффекта|
|se_name|string|да|Название побочного эффекта|

Выходные данные для списка побочного эффекта<br/>

|**Праметр**|**Тип данных**|**Обязательность**|**Описание**|
|:-----|:--------|:--------|:------|
|side_effects|Aray(object)|да|Список объектов побочных эффектов|

### Статусы ответа
200 - Побочный эффект найден / Списко побочных эффектов получен <br/>
400 - Побочный эффект [название] не найден <br/>
500 - Неизвестная ошибка сервера <br/>

### Пример выходныйх данных для группы ЛС
```json
{
    "result": {
        "status": 200, 
        "message": "Список ЛС получен"
    },
    "data": [
        {
            "id": "1",
            "se_name": "брадикардия"
        },
        {
            "id": "2",
            "se_name": "почечная недосточность"
        },
    ]
}
```

### Пример выходныйх данных для одного ЛС
```json
{
    "result": {
        "status": 200, 
        "message": "ЛС получено"
    },
    "data": {
        "id": "1",
        "se_name": "брадикардия"
    }
}
```

### Пример выходныйх данных при ошибке
```json
{
    "result": {
        "status": 400, 
        "message": "Ошибка при получении спобочного эффекта брадикардия"
    },
    "data": {}
}
```



