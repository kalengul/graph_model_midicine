<!DOCTYPE html>
<html>
    <head>
        <title>фозиноприл</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/index.css">
        <style>
            .Graphcontainer{
                width: 98%;
                height: 85vh;

                border: solid 0.5px black;
                border-radius: 7px;
            }

            .svgGraph{
                width: 100%;
                height: 100%;
            }   
        </style>
        <script src="./d3.v7.js"></script>
    </head>
    <body>
        <main>
            <div class="flex jc-center">
                <h1>фозиноприл</h1>
            </div>
            <br/>
            <div class='Graphcontainer' >
                <svg class='svgGraph'> </svg>
            </div>
        </main>

        <script>
            const colors = {
                selectNode: "#E8BD6D",
                selectLink: "#8B7474",
                node: "#E9EEF4",
                link: '#B8B5B5'
            }

            const nodeView = {
                r: 30
            }

            const graphData = {"directed":true,"multigraph":false,"graph":{},"nodes":[{"label":"group","weight":5,"id":"698666b4-37ab-4578-9893-9693c5d578c3","name":"ингибитор ангиотензинпревращать фермент (апф)","level":0,"r":30,"y":133.33333333333334,"x":12.631578947368421},{"label":"mechanism","weight":5,"id":"9ce7785d-de07-4fff-bd1e-f0c76a95f855","name":"замедлять метаболизм брадикинин","level":4,"r":30,"y":653.3333333333334,"x":240},{"label":"action","weight":5,"id":"05a2b4c6-3e7f-4c57-b080-d6919b45a439","name":"вазодилатировать действие","level":5,"r":30,"y":783.3333333333334,"x":240},{"label":"action","weight":5,"id":"422dfcfa-749b-4d2b-b570-08cfbd0308d1","name":"антигипертензивное действие","level":6,"r":30,"y":913.3333333333334,"x":200},{"label":"metabol","weight":5,"id":"53040910-f384-4810-a115-786c60180fa0","name":"слизистый оболочка желудочный-кишечный тракт","level":3,"r":30,"y":523.3333333333333,"x":300},{"label":"metabol","weight":5,"id":"87c4f09b-0718-4136-9e44-00287a217235","name":"печень","level":3,"r":30,"y":523.3333333333333,"x":380},{"label":"excretion","weight":5,"id":"e77a307d-74f8-441f-8638-105c137d45d9","name":"почка","level":3,"r":30,"y":523.3333333333333,"x":460},{"label":"prepare","weight":5,"id":"21d6c656-6c7b-42a7-91fa-a8211bcaa228","name":"фозиноприл","level":1,"r":30,"y":263.33333333333337,"x":1200},{"label":"prepare","weight":5,"id":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","name":"фозиноприлат","level":2,"r":30,"y":393.3333333333333,"x":1200},{"label":"mechanism","weight":5,"id":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","name":"ингибитор ангиотензинпревращающать фермент","level":3,"r":30,"y":523.3333333333333,"x":540},{"label":"action","weight":5,"id":"6f59a6ca-cc57-4385-95ef-878674cdd7ea","name":"снижение концентрация ангиотензин II в плазма кровь","level":4,"r":30,"y":653.3333333333334,"x":320},{"label":"mechanism","weight":5,"id":"b5ca4051-3585-40aa-a3f5-f54217aabaae","name":"снижение секреция альдостерон","level":5,"r":30,"y":783.3333333333334,"x":320},{"label":"action","weight":5,"id":"34249fa5-c4fd-4c5c-a5c6-2e263cba389f","name":"уменьшение вазопрессорный активность","level":6,"r":30,"y":913.3333333333334,"x":280},{"label":"action","weight":5,"id":"12bd0478-8fdc-495d-839b-9426f45f20f3","name":"постнагрузка","level":5,"r":30,"y":783.3333333333334,"x":400},{"label":"action","weight":5,"id":"e3014b24-a931-4c5f-bc35-5b91a7c82067","name":"увеличение содержание ион калий в сыворотка","level":6,"r":30,"y":913.3333333333334,"x":360},{"label":"action","weight":5,"id":"c9bde498-fc73-4468-8c08-96e5a6d10d5f","name":"торможение ренин-ангиотензин-альдостеронов система (раас)","level":5,"r":30,"y":783.3333333333334,"x":480},{"label":"side_e","weight":5,"id":"b148db89-a9d9-4dfe-a473-349d17f20de5","name":"парестезия","level":8,"r":30,"y":1173.3333333333335,"x":171.42857142857142},{"label":"side_e","weight":5,"id":"eec8f021-b554-45a4-baad-7988eb961042","name":"головокружение","level":8,"r":30,"y":1173.3333333333335,"x":251.42857142857142},{"label":"side_e","weight":5,"id":"8c653c45-f17b-4ba2-94d8-100775ca8782","name":"головная боль","level":8,"r":30,"y":1173.3333333333335,"x":331.42857142857144},{"label":"side_e","weight":5,"id":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","name":"артериальный гипотензия","level":7,"r":30,"y":1043.3333333333335,"x":600},{"label":"side_e","weight":5,"id":"a475404e-a138-4b10-af61-3ec884b37cc0","name":"обморок","level":8,"r":30,"y":1173.3333333333335,"x":411.42857142857144},{"label":"side_e","weight":5,"id":"fce68042-1d74-45c2-b939-779ab13dca61","name":"нарушение функция почка","level":4,"r":30,"y":653.3333333333334,"x":400},{"label":"side_e","weight":5,"id":"f4dbe895-a19b-45dc-a8a9-35bcf9d81d53","name":"тахикардия","level":0,"r":30,"y":133.33333333333334,"x":92.63157894736842},{"label":"side_e","weight":5,"id":"0c571fc9-f73c-479d-b3e8-6a75ccd55c27","name":"выраженный снижение ад","level":8,"r":30,"y":1173.3333333333335,"x":491.42857142857144},{"label":"side_e","weight":5,"id":"6c8f76fc-abcd-4f1d-8050-c927e1a8cb37","name":"ортостатический гипотензия","level":6,"r":30,"y":913.3333333333334,"x":440},{"label":"side_e","weight":5,"id":"dfc194e6-e299-4c79-ac09-c4e1f32ce19c","name":"гиперкалиемия","level":7,"r":30,"y":1043.3333333333335,"x":680},{"label":"side_e","weight":5,"id":"e8e0404b-1b88-4235-956d-93b6978998ab","name":"кашель","level":5,"r":30,"y":783.3333333333334,"x":560},{"label":"side_e","weight":5,"id":"21495ba8-56b7-4483-9058-3ab3dd0f2222","name":"инфекция верхний дыхательный путь","level":0,"r":30,"y":133.33333333333334,"x":172.63157894736844},{"label":"side_e","weight":5,"id":"f7f7707b-6850-4eed-822b-b06d0b4526c6","name":"фарингит","level":0,"r":30,"y":133.33333333333334,"x":252.63157894736844},{"label":"side_e","weight":5,"id":"3226ae62-c5cd-4f27-afe1-8bbfb9976f2d","name":"ринит","level":0,"r":30,"y":133.33333333333334,"x":332.63157894736844},{"label":"side_e","weight":5,"id":"2fa545d7-4f79-43b3-aa28-b1af4e004d77","name":"вирусный инфекция","level":0,"r":30,"y":133.33333333333334,"x":412.63157894736844},{"label":"side_e","weight":5,"id":"a500f616-b3b7-4f67-be7f-5fd2991040bd","name":"ларингит","level":0,"r":30,"y":133.33333333333334,"x":492.63157894736844},{"label":"side_e","weight":5,"id":"c4217ccd-a771-470e-ae99-78161f882f55","name":"пневмония","level":0,"r":30,"y":133.33333333333334,"x":572.6315789473684},{"label":"side_e","weight":5,"id":"b89f6ddb-326e-46de-bcdb-75bfb837a31b","name":"синусит","level":0,"r":30,"y":133.33333333333334,"x":652.6315789473684},{"label":"side_e","weight":5,"id":"e0d33494-4393-43b7-96c9-4ba544694626","name":"трахеобронхит","level":0,"r":30,"y":133.33333333333334,"x":732.6315789473684},{"label":"side_e","weight":5,"id":"46e425e9-9d1e-41f5-b149-41b543928508","name":"эозинофилия","level":0,"r":30,"y":133.33333333333334,"x":812.6315789473684},{"label":"side_e","weight":5,"id":"05aed065-9db4-4f17-85b7-63f9cb3189ff","name":"лейкопения","level":0,"r":30,"y":133.33333333333334,"x":892.6315789473684},{"label":"side_e","weight":5,"id":"d64a2368-568e-4a49-a7c1-aa098627aecb","name":"нейтропения","level":0,"r":30,"y":133.33333333333334,"x":972.6315789473684},{"label":"side_e","weight":5,"id":"0254ea7e-cc5d-42c1-878f-0279bfd400fc","name":"воспаление лимфатический узел","level":0,"r":30,"y":133.33333333333334,"x":1052.6315789473683},{"label":"side_e","weight":5,"id":"4b0c91ea-7906-4560-851e-690343366ac3","name":"обострение течение подагра","level":0,"r":30,"y":133.33333333333334,"x":1132.6315789473683},{"label":"side_e","weight":5,"id":"0032fcce-98ac-4337-8e0d-ecede5eeca01","name":"расстройство аппетит","level":0,"r":30,"y":133.33333333333334,"x":1212.6315789473683},{"label":"side_e","weight":5,"id":"38c91e11-52c5-44b0-8957-cb2ca5082a89","name":"колебание масса тело","level":0,"r":30,"y":133.33333333333334,"x":1292.6315789473683},{"label":"side_e","weight":5,"id":"1972ab53-b566-4151-922a-bf3c22e784ad","name":"нарушение сна","level":0,"r":30,"y":133.33333333333334,"x":1372.6315789473683},{"label":"side_e","weight":5,"id":"9389aa9a-a6a4-46b0-ae8e-362dc99b7661","name":"изменение настроения","level":0,"r":30,"y":133.33333333333334,"x":1452.6315789473683},{"label":"side_e","weight":5,"id":"e22e3e70-926a-474c-83f3-b1db1afcf8ef","name":"депрессия","level":0,"r":30,"y":133.33333333333334,"x":1532.6315789473683},{"label":"side_e","weight":5,"id":"58ab54b2-3175-4cf1-8e84-02d70508615c","name":"расстройство поведение","level":0,"r":30,"y":133.33333333333334,"x":1612.6315789473683},{"label":"side_e","weight":5,"id":"a09a05d3-c4db-471b-9c23-862e3c974c6c","name":"спутанность сознания","level":0,"r":30,"y":133.33333333333334,"x":1692.6315789473683},{"label":"side_e","weight":5,"id":"bd28254d-e27b-424d-b8e5-f297cdf7d7bb","name":"ишемический инсульт","level":0,"r":30,"y":133.33333333333334,"x":1772.6315789473683},{"label":"side_e","weight":5,"id":"33cd7e5e-87e2-4060-b620-7dbf31747b17","name":"транзиторный ишемический атака","level":0,"r":30,"y":133.33333333333334,"x":1852.6315789473683},{"label":"side_e","weight":5,"id":"7093c6f2-2139-4463-ba89-10314cca16ad","name":"тремор","level":0,"r":30,"y":133.33333333333334,"x":1932.6315789473683},{"label":"side_e","weight":5,"id":"7128545d-a83c-44a4-ba42-28383d699a0b","name":"нарушение память","level":0,"r":30,"y":133.33333333333334,"x":2012.6315789473683},{"label":"side_e","weight":5,"id":"e6bcee9a-17a4-4cda-b3df-f41dfc13d627","name":"нарушение способность поддерживать равновесие","level":0,"r":30,"y":133.33333333333334,"x":2092.6315789473683},{"label":"side_e","weight":5,"id":"570217fc-151f-42bf-9f58-4f99f0d9ad27","name":"сонливость","level":0,"r":30,"y":133.33333333333334,"x":2172.6315789473683},{"label":"side_e","weight":5,"id":"6e0b3d62-32a4-4628-83e2-95da2e169911","name":"острый нарушение мозговой кровообращение","level":0,"r":30,"y":133.33333333333334,"x":2252.6315789473683},{"label":"side_e","weight":5,"id":"1c0c8863-7e5d-414b-a4d9-06bcde0ce166","name":"нарушение зрения/зрительные расстройства","level":0,"r":30,"y":133.33333333333334,"x":2332.6315789473683},{"label":"side_e","weight":5,"id":"608311e9-cb6f-46b6-b9cc-930e222c49a1","name":"шум в ухо","level":0,"r":30,"y":133.33333333333334,"x":2412.6315789473683},{"label":"side_e","weight":5,"id":"c4de3fa3-0ee2-43f1-bf2e-0ca08ce6eba1","name":"нарушение вестибулярный аппарат","level":0,"r":30,"y":133.33333333333334,"x":2492.6315789473683},{"label":"side_e","weight":5,"id":"809af929-78c2-48f0-96ad-34493717275e","name":"ощущение сердцебиение","level":8,"r":30,"y":1173.3333333333335,"x":571.4285714285714},{"label":"side_e","weight":5,"id":"1f96da23-0e24-49c6-9f8d-1440a06a9038","name":"аритмия","level":0,"r":30,"y":133.33333333333334,"x":2572.6315789473683},{"label":"side_e","weight":5,"id":"afc3ddc7-8c66-48aa-9f7c-3beea3a50686","name":"стенокардия","level":0,"r":30,"y":133.33333333333334,"x":2652.6315789473683},{"label":"side_e","weight":5,"id":"1dff3076-2bee-4c9f-9c2b-ad72c9eb9c7a","name":"инфаркт миокард","level":0,"r":30,"y":133.33333333333334,"x":2732.6315789473683},{"label":"side_e","weight":5,"id":"0d285418-e1cc-42e0-a686-ed75388e47c7","name":"остановка сердце","level":0,"r":30,"y":133.33333333333334,"x":2812.6315789473683},{"label":"side_e","weight":5,"id":"9a0a237d-7e7c-4a41-afe2-fb83d63062bc","name":"нарушение сердечный проводимость","level":0,"r":30,"y":133.33333333333334,"x":2892.6315789473683},{"label":"side_e","weight":5,"id":"e09bf053-506d-4cf5-b357-7617d6d87af5","name":"гипертонический криз","level":0,"r":30,"y":133.33333333333334,"x":2972.6315789473683},{"label":"side_e","weight":5,"id":"58f09272-502d-4ecc-b33a-dafe0f97d9f0","name":"шок","level":0,"r":30,"y":133.33333333333334,"x":3052.6315789473683},{"label":"side_e","weight":5,"id":"b9a7c5d1-825f-4bb0-9400-1545bafca38f","name":"«приливы» крови к коже лица","level":0,"r":30,"y":133.33333333333334,"x":3132.6315789473683},{"label":"side_e","weight":5,"id":"12c36995-ba2b-4c93-a250-7ad1ad6e9d75","name":"кровоизлияние","level":0,"r":30,"y":133.33333333333334,"x":3212.6315789473683},{"label":"side_e","weight":5,"id":"611aaabf-47ed-4c0a-9ff7-4ad71960b6b3","name":"гипертензия","level":0,"r":30,"y":133.33333333333334,"x":3292.6315789473683},{"label":"side_e","weight":5,"id":"022468a0-09db-476a-87dc-c12833e9f924","name":"заболевание периферический сосуд","level":0,"r":30,"y":133.33333333333334,"x":3372.6315789473683},{"label":"side_e","weight":5,"id":"a27604c0-cd81-4f9d-a920-d84f11c63c45","name":"нарушение со сторона синусовый пазуха","level":0,"r":30,"y":133.33333333333334,"x":3452.6315789473683},{"label":"side_e","weight":5,"id":"2018563a-617a-489a-920f-415876886f9e","name":"сухой кашель","level":0,"r":30,"y":133.33333333333334,"x":3532.6315789473683},{"label":"side_e","weight":5,"id":"de998a6d-3315-423b-a101-9a1d2675fbcd","name":"одышка","level":0,"r":30,"y":133.33333333333334,"x":3612.6315789473683},{"label":"side_e","weight":5,"id":"4d462e3c-1f8f-4bd4-a1b0-208abcea396f","name":"бронхоспазм","level":0,"r":30,"y":133.33333333333334,"x":3692.6315789473683},{"label":"side_e","weight":5,"id":"a2ee2849-d80c-405d-b1d5-06385d6035da","name":"застой в легкий","level":0,"r":30,"y":133.33333333333334,"x":3772.6315789473683},{"label":"side_e","weight":5,"id":"032bd7fb-badd-4153-b565-6fd6f538029f","name":"дисфония","level":0,"r":30,"y":133.33333333333334,"x":3852.6315789473683},{"label":"side_e","weight":5,"id":"94725026-9d53-42a7-8403-d0a2aaf9f2c2","name":"носовой кровотечение","level":0,"r":30,"y":133.33333333333334,"x":3932.6315789473683},{"label":"side_e","weight":5,"id":"88ecac08-8c35-4586-976f-cec4401b51d5","name":"боль в область грудной клетка","level":0,"r":30,"y":133.33333333333334,"x":4012.6315789473683},{"label":"side_e","weight":5,"id":"70dbdd0a-053a-4f73-984a-dbba5c263092","name":"тошнота","level":0,"r":30,"y":133.33333333333334,"x":4092.6315789473683},{"label":"side_e","weight":5,"id":"03a0427a-271b-4528-9776-6ee326e29ea4","name":"рвота","level":0,"r":30,"y":133.33333333333334,"x":4172.631578947368},{"label":"side_e","weight":5,"id":"81fc349f-2da7-4351-8dfd-f12cde2b2f2b","name":"диарея","level":0,"r":30,"y":133.33333333333334,"x":4252.631578947368},{"label":"side_e","weight":5,"id":"a3fca039-8203-4a34-987a-6988530afe03","name":"диспепсия","level":0,"r":30,"y":133.33333333333334,"x":4332.631578947368},{"label":"side_e","weight":5,"id":"99854c04-13ba-4983-ba43-26076356277f","name":"боль в живот","level":0,"r":30,"y":133.33333333333334,"x":4412.631578947368},{"label":"side_e","weight":5,"id":"f223fd04-7963-4149-b9c3-81f065f4b715","name":"дисгевзия","level":0,"r":30,"y":133.33333333333334,"x":4492.631578947368},{"label":"side_e","weight":5,"id":"a4968d68-83a9-46ab-a747-fdf42d6ba887","name":"панкреатит","level":0,"r":30,"y":133.33333333333334,"x":4572.631578947368},{"label":"side_e","weight":5,"id":"cf28be66-2782-4303-bffc-85df3ef6ab3b","name":"отечность язык","level":0,"r":30,"y":133.33333333333334,"x":4652.631578947368},{"label":"side_e","weight":5,"id":"6f1dd8b9-d4fc-448e-a505-b35ed22ae6d6","name":"дисфагия","level":0,"r":30,"y":133.33333333333334,"x":4732.631578947368},{"label":"side_e","weight":5,"id":"e9864ade-e7c7-4456-bc53-a832efd1fe50","name":"вздутие живота","level":0,"r":30,"y":133.33333333333334,"x":4812.631578947368},{"label":"side_e","weight":5,"id":"e110499a-4028-4500-bc4d-35d6cd23ef7c","name":"нарушение со стороны полости рта","level":0,"r":30,"y":133.33333333333334,"x":4892.631578947368},{"label":"side_e","weight":5,"id":"bf9193a6-d834-49c2-940a-7e150072087f","name":"запор","level":0,"r":30,"y":133.33333333333334,"x":4972.631578947368},{"label":"side_e","weight":5,"id":"75f88ae7-2864-43c0-9a8a-392e1209d9a7","name":"метеоризм","level":0,"r":30,"y":133.33333333333334,"x":5052.631578947368},{"label":"side_e","weight":5,"id":"9cb990a9-9501-4842-bd9f-710a19fd1102","name":"сухость в рот","level":0,"r":30,"y":133.33333333333334,"x":5132.631578947368},{"label":"side_e","weight":5,"id":"90511957-2acf-44c3-989f-a8b6e4ceda8e","name":"гепатит","level":0,"r":30,"y":133.33333333333334,"x":5212.631578947368},{"label":"side_e","weight":5,"id":"1d565aa5-ca35-4f55-906a-bf201c5c2931","name":"ангионевротический отек","level":0,"r":30,"y":133.33333333333334,"x":5292.631578947368},{"label":"side_e","weight":5,"id":"10d8df11-3b17-4932-aea4-e9d4c69273ce","name":"кожная сыпь","level":0,"r":30,"y":133.33333333333334,"x":5372.631578947368},{"label":"side_e","weight":5,"id":"10a047d2-5d1c-4061-bfc8-59d9480c4958","name":"повышенный потоотделение","level":0,"r":30,"y":133.33333333333334,"x":5452.631578947368},{"label":"side_e","weight":5,"id":"359156ff-4d85-4ed6-8852-1e6ea4fe9fc2","name":"кровоизлияние в кожа","level":0,"r":30,"y":133.33333333333334,"x":5532.631578947368},{"label":"side_e","weight":5,"id":"bb8daad2-5e30-484b-b975-c2e5c01c6e50","name":"кожный зуд","level":0,"r":30,"y":133.33333333333334,"x":5612.631578947368},{"label":"side_e","weight":5,"id":"a9bda12c-1440-4416-aad5-9da15286ba99","name":"дерматит","level":0,"r":30,"y":133.33333333333334,"x":5692.631578947368},{"label":"side_e","weight":5,"id":"aa7a41cb-bb01-4312-9949-8143428db81e","name":"скелетно-мышечный боль","level":0,"r":30,"y":133.33333333333334,"x":5772.631578947368},{"label":"side_e","weight":5,"id":"b0c4d326-7250-41f9-a439-d5c1cb6ee127","name":"крапивница","level":0,"r":30,"y":133.33333333333334,"x":5852.631578947368},{"label":"side_e","weight":5,"id":"70d288c1-cc14-4a4c-af54-e32f39bed522","name":"миалгия","level":0,"r":30,"y":133.33333333333334,"x":5932.631578947368},{"label":"side_e","weight":5,"id":"3a517bfa-e4b1-49ac-9cbb-8f1876536329","name":"артрит","level":0,"r":30,"y":133.33333333333334,"x":6012.631578947368},{"label":"side_e","weight":5,"id":"dfb2f42a-a5cb-4d24-8510-19c1257c274c","name":"мышечный слабость","level":0,"r":30,"y":133.33333333333334,"x":6092.631578947368},{"label":"side_e","weight":5,"id":"9b78fbca-4ed2-4c81-bf3a-6cfb3f78c3fe","name":"нарушение мочеиспускания","level":0,"r":30,"y":133.33333333333334,"x":6172.631578947368},{"label":"side_e","weight":5,"id":"68b753f3-823d-4853-a7de-5f1b7d89d8a7","name":"сексуальный дисфункция","level":0,"r":30,"y":133.33333333333334,"x":6252.631578947368},{"label":"side_e","weight":5,"id":"3f54e785-f2f0-492b-a3fc-14752322eca4","name":"развитие или усугубление симптом хронический почечный недостаточность","level":0,"r":30,"y":133.33333333333334,"x":6332.631578947368},{"label":"side_e","weight":5,"id":"c7d4988d-34a0-42e3-b35f-8c089a0675b6","name":"нарушение со сторона предстательный железа","level":0,"r":30,"y":133.33333333333334,"x":6412.631578947368},{"label":"side_e","weight":5,"id":"4328a84d-7fc4-4eb4-82dd-eec3068fd1fd","name":"повышенный утомляемость","level":0,"r":30,"y":133.33333333333334,"x":6492.631578947368},{"label":"side_e","weight":5,"id":"a7a5f5a6-c3b5-4f45-8e3c-ac094d93c2ff","name":"боль в грудной клетка","level":0,"r":30,"y":133.33333333333334,"x":6572.631578947368},{"label":"side_e","weight":5,"id":"483644ee-fb99-4e12-9b67-7c22f101251c","name":"отек","level":0,"r":30,"y":133.33333333333334,"x":6652.631578947368},{"label":"side_e","weight":5,"id":"27e81e06-5ecd-4cca-865e-0ec8fc158e26","name":"периферический отек","level":0,"r":30,"y":133.33333333333334,"x":6732.631578947368},{"label":"side_e","weight":5,"id":"4b09961f-1a02-441e-be41-99940d7dd7a1","name":"астения","level":0,"r":30,"y":133.33333333333334,"x":6812.631578947368},{"label":"side_e","weight":5,"id":"6652e328-18c9-4890-b803-9dc7b8f9fe34","name":"боль","level":0,"r":30,"y":133.33333333333334,"x":6892.631578947368},{"label":"side_e","weight":5,"id":"ebb35f14-24f8-46a1-81f9-3111dc0726c8","name":"лихорадка","level":0,"r":30,"y":133.33333333333334,"x":6972.631578947368},{"label":"side_e","weight":5,"id":"01877349-2230-4cd4-8605-88dd62e73a07","name":"повышение активность \"печеночный\" трансаминаз","level":0,"r":30,"y":133.33333333333334,"x":7052.631578947368},{"label":"side_e","weight":5,"id":"e6c8c7c6-02a1-459a-9ef3-3e78ffcd1707","name":"гипербилирубинемия","level":0,"r":30,"y":133.33333333333334,"x":7132.631578947368},{"label":"side_e","weight":5,"id":"8981f6e1-a595-43d2-80f4-f96656ce409f","name":"гиперкреатининемия","level":0,"r":30,"y":133.33333333333334,"x":7212.631578947368},{"label":"side_e","weight":5,"id":"5a45bc2b-950a-477f-8d24-f65ee0e8bd12","name":"повышение концентрация мочевина","level":0,"r":30,"y":133.33333333333334,"x":7292.631578947368},{"label":"side_e","weight":5,"id":"5c262e91-a68a-424d-96e7-a93d190a53c9","name":"гипонатриемия","level":0,"r":30,"y":133.33333333333334,"x":7372.631578947368},{"label":"side_e","weight":5,"id":"ce730238-9cec-48d8-b0c5-cc19de28c90a","name":"снижение гемоглобина и гематокрита","level":0,"r":30,"y":133.33333333333334,"x":7452.631578947368},{"label":"side_e","weight":5,"id":"a2195708-2b13-4f27-9179-65f6618a756f","name":"повышение скорость оседание эритроцит","level":0,"r":30,"y":133.33333333333334,"x":7532.631578947368},{"label":"action","weight":5,"id":"e27945ec-6197-414f-931c-e0b8bb56de77","name":"снижение содержание ион натрий","level":6,"r":30,"y":913.3333333333334,"x":520},{"label":"action","weight":5,"id":"a4b0919f-01ec-4193-84dd-d83357ece511","name":"снижение содержание объем жидкость","level":6,"r":30,"y":913.3333333333334,"x":600},{"label":"action","weight":5,"id":"a1c91dc9-5570-4774-8bb3-9517778271e0","name":"снижение на миокард","level":4,"r":30,"y":653.3333333333334,"x":480},{"label":"side_e","weight":5,"id":"5ed310df-444e-4f7d-8ac5-fb9593d07ea4","name":"ощущение аритмия","level":8,"r":30,"y":1173.3333333333335,"x":651.4285714285714},{"label":"action","weight":5,"id":"07c33f52-810c-4f85-a305-13880c887239","name":"снижение на миокард преднагрузка","level":4,"r":30,"y":653.3333333333334,"x":560}],"links":[{"source":"698666b4-37ab-4578-9893-9693c5d578c3","target":"21d6c656-6c7b-42a7-91fa-a8211bcaa228","id":"2ce09f3b-cbfe-4b2b-ad43-2d1e57ede674"},{"source":"9ce7785d-de07-4fff-bd1e-f0c76a95f855","target":"05a2b4c6-3e7f-4c57-b080-d6919b45a439","id":"3484af4d-5c57-41a8-b786-ba5efed2af09"},{"source":"9ce7785d-de07-4fff-bd1e-f0c76a95f855","target":"e8e0404b-1b88-4235-956d-93b6978998ab","id":"07781068-965a-4fc3-b167-ec1943b546c6"},{"source":"05a2b4c6-3e7f-4c57-b080-d6919b45a439","target":"422dfcfa-749b-4d2b-b570-08cfbd0308d1","id":"165f64f7-f4ec-46ee-9d2a-b53560fa8d80"},{"source":"05a2b4c6-3e7f-4c57-b080-d6919b45a439","target":"6c8f76fc-abcd-4f1d-8050-c927e1a8cb37","id":"84ad4b03-2f87-47ae-90c7-ef4ed1d97610"},{"source":"422dfcfa-749b-4d2b-b570-08cfbd0308d1","target":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","id":"906618d8-1918-4da7-8900-a166e4a2554c"},{"source":"e77a307d-74f8-441f-8638-105c137d45d9","target":"fce68042-1d74-45c2-b939-779ab13dca61","id":"6ec97fb4-f031-48aa-a34e-bd036e7bfbce"},{"source":"21d6c656-6c7b-42a7-91fa-a8211bcaa228","target":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","id":"83ac96d6-5622-4590-b67e-e8219f9145f5"},{"source":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","target":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","id":"e432226c-77ce-4489-94d5-b1004fa14707"},{"source":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","target":"87c4f09b-0718-4136-9e44-00287a217235","id":"7752cf60-0e30-4df6-8ce3-475b100f6ad9"},{"source":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","target":"e77a307d-74f8-441f-8638-105c137d45d9","id":"af39200b-e8fd-4f97-89c2-f862f1af0408"},{"source":"4a84c399-47a6-4ff8-b6aa-1d2acd3a987e","target":"53040910-f384-4810-a115-786c60180fa0","id":"ac7218b8-46e8-4b52-84cd-b2796740c1ba"},{"source":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","target":"6f59a6ca-cc57-4385-95ef-878674cdd7ea","id":"4e9f3e18-0741-4c03-b4e0-0a29f3a88c0b"},{"source":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","target":"9ce7785d-de07-4fff-bd1e-f0c76a95f855","id":"62936262-98bc-4df3-9dfd-3b5b0aa51ced"},{"source":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","target":"a1c91dc9-5570-4774-8bb3-9517778271e0","id":"377de4f1-b8f2-4927-9c9c-512cbed0a392"},{"source":"307a8b82-7afa-4a0c-80be-fe0fb74b66a3","target":"07c33f52-810c-4f85-a305-13880c887239","id":"150681cb-ef61-455d-b142-d942acb0802e"},{"source":"6f59a6ca-cc57-4385-95ef-878674cdd7ea","target":"b5ca4051-3585-40aa-a3f5-f54217aabaae","id":"cf43fa20-784a-4b13-b43f-d2cff9de2082"},{"source":"6f59a6ca-cc57-4385-95ef-878674cdd7ea","target":"c9bde498-fc73-4468-8c08-96e5a6d10d5f","id":"51e4118e-201d-48d1-a011-45a512c94389"},{"source":"b5ca4051-3585-40aa-a3f5-f54217aabaae","target":"e3014b24-a931-4c5f-bc35-5b91a7c82067","id":"1d76e797-3bfd-4cff-a845-1f10a462e357"},{"source":"b5ca4051-3585-40aa-a3f5-f54217aabaae","target":"e27945ec-6197-414f-931c-e0b8bb56de77","id":"10ef155f-0e1b-4f3d-aa66-b53a86fbd9a4"},{"source":"b5ca4051-3585-40aa-a3f5-f54217aabaae","target":"a4b0919f-01ec-4193-84dd-d83357ece511","id":"c4f1a41c-49d0-41c4-b86f-7882541fca7e"},{"source":"e3014b24-a931-4c5f-bc35-5b91a7c82067","target":"dfc194e6-e299-4c79-ac09-c4e1f32ce19c","id":"df209465-a51a-4d0e-9b31-c58e9b549f00"},{"source":"c9bde498-fc73-4468-8c08-96e5a6d10d5f","target":"34249fa5-c4fd-4c5c-a5c6-2e263cba389f","id":"d3f25a56-784c-41c8-af71-ad6b73b64f7c"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"eec8f021-b554-45a4-baad-7988eb961042","id":"db782e12-f32e-4fe8-84f8-58b1ee05a59d"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"b148db89-a9d9-4dfe-a473-349d17f20de5","id":"8ad08dfc-515d-4bf0-a162-494e2a5b09a0"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"8c653c45-f17b-4ba2-94d8-100775ca8782","id":"de9b2427-1c8b-433e-98fc-e3126b53fb5b"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"a475404e-a138-4b10-af61-3ec884b37cc0","id":"5160d170-0fb6-42f6-8bec-61cfa42fc7f1"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"0c571fc9-f73c-479d-b3e8-6a75ccd55c27","id":"39aaf886-605e-426b-91f8-98d5103f6d85"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"809af929-78c2-48f0-96ad-34493717275e","id":"72e6854c-a521-4d86-869c-273b5090a8b6"},{"source":"fb1c8d30-a0c6-46d2-8b2b-1529f6b78e64","target":"5ed310df-444e-4f7d-8ac5-fb9593d07ea4","id":"9807d920-8cb8-425c-9ff2-734cec8d3bdd"},{"source":"a1c91dc9-5570-4774-8bb3-9517778271e0","target":"12bd0478-8fdc-495d-839b-9426f45f20f3","id":"08aa22a2-1f72-4ea5-b9ec-a447a0699be9"}],"name":"фозиноприл","maxLevel":9,"levelsInfo":{"levelNodesCount":{"0":95,"1":1,"2":1,"3":4,"4":5,"5":5,"6":6,"7":2,"8":7}},"isParse":true}
            const window_params = {"width":1200,"height":600,"xStep":50,"yStep":100}

            console.log(graphData)

            

            if (graphData){
                const svg = d3.select("svg")
                svg.selectAll("*").remove() // Очистка предыдущего графа

                svg.attr("width",   window_params.width) //Устанавливает атрибут width
                .attr("height",   window_params.height)
                .append("g").attr('class', 'group') //добавляет новый элемент, тег которого передается в метод в качестве параметра

                const svgGroup = svg.select('g.group')

                // Масштабирование и перемещение
                const zoom = d3.zoom()
                .scaleExtent([0.1, 10])
                .on("zoom", (event)=>{ //Обновление позиционирования элементов при масштабировании
                    svgGroup.attr("transform", event.transform);
                });
                svg.call(zoom);


                const dragstarted = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0.3).restart(); // Увеличиваем "температуру" симуляции для более плавного движения
                    d.fx = d.x; // Фиксируем позицию узла
                    d.fy = d.y;
                }
                
                const dragged = (event, d)=>{
                    d.fx = event.x; // Обновляем фиксированные координаты узла
                    d.fy = event.y;
                }
                
                const dragended = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0); // Охлаждаем симуляцию после перетаскивания
                    d.fx = null; // Отпускаем узел, позволяя симуляции снова влиять на его позицию
                    d.fy = null;
                }

                // Создаем обработчик drag
                const drag = d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);


                // Определение маркера стрелки
                svgGroup.append("defs")
                .append("marker")
                .attr("id", "arrowhead")
                .attr("markerWidth", 5) //Размер области, в которой будет отображаться маркер
                .attr("markerHeight", 4)
                .attr("refX", nodeView.r+4)
                .attr("refY", 2)
                .attr("orient", "auto")
                .append("polygon")
                .attr("points", "0 0, 5 2, 0 4")
                .style("fill", colors.link);

                
                //Добавление ссылок
                let links = svgGroup.append("g").attr('class', 'links')
                .selectAll('.link')
                .data(graphData.links) //Добавление данных
                .enter() //Нужен для ввода дополнительных значений (так как data привязывает только первое)
                .append('path')
                .attr('class', 'link')
                .attr('stroke', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return colors.selectLink
                    return colors.link
                }) // Цвет линии ребра
                .attr('stroke-width', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return 2
                    return 1
                }) // Ширина линии ребра
                .attr("marker-end", "url(#arrowhead)") // Добавление стрелки в конец ребра
                .style('pointer-events', 'none') //(устанавливает стиль) Отключение событий на ребрах (клики и т.д.)

                // Создание узлов
                let nodes = svgGroup.append("g").attr('class', 'nodes')
                .selectAll('.node')
                .data(graphData.nodes)
                .enter()
                .append('g')
                .attr('class', 'node')
                .call(drag);

                nodes.append('circle')
                .attr('class', 'node')
                .attr('id', d => d.id)
                .attr('r', d => d.r) // Радиус узла
                .attr('fill', d=>{
                    //if(selectedNodes.sourseNode === d.id || selectedNodes.targetNode === d.id) return colors.selectNode
                    return colors.node
                }) // Цвет заполнения
                .attr("cursor", "pointer")
                .on('click', (event, d) => {
                    // Добавьте логику для обработки клика по узлу
                });

                //Отображение текста v2
                nodes.append('foreignObject')
                .attr('x', d => -d.r * 0.8)
                .attr('y', d => -d.r * 0.8)
                .attr('width', d => d.r * 1.6)
                .attr('height', d => d.r * 1.6)
                .append('xhtml:div')
                .style('display', 'flex')
                .style('justify-content', 'center')
                .style('align-items', 'center')
                .style('width', '100%')
                .style('height', '100%')
                .style('font-size', '5px')
                .style('text-anchor', 'middle')
                .style('word-wrap', 'break-word')
                .style('overflow', 'hidden')
                .style('pointer-events', 'none')
                .text(d => d.name);

                //Создание симуляции силы v3
                const simulation = d3.forceSimulation(graphData.nodes)
                // Связи между узлами
                .force("link", d3.forceLink(graphData.links).id(d => d.id))//.distance(nodeView.r*10)) //!!! Сила в зависимости от количества узлов в уровне!!!!!
                // Отталкивание узлов
                .force("charge", d3.forceManyBody(graphData.nodes).strength(d=>graphData.levelsInfo.levelNodesCount[d.level]*(-100)))//-3000))
                // Центрирование по x
                .force("center", d3.forceCenter( window_params.width / 2,  window_params.height / 2))
                // Выравнивание по уровням
                .force("y", d3.forceY().strength(6)
                    .y(d =>  window_params.height * ((d.level+1) / (graphData.maxLevel-1)))) //!!!!!!!!!!Уровень с большим числом узлов шире, чем с меньшим
                // Отталкивание по x в рамках одного уровня
                .force("x", d3.forceX().strength(0.05)
                    .x( window_params.width / 2))
                // Дополнительная сила для предотвращения наложения узлов
                .force("collision", d3.forceCollide().radius(40));

                // Обновление позиций узлов и связей при каждой итерации симуляции
                //Обновление симуляции
                simulation.on('tick', () => {
                    links.attr("d", d => `M${d.source.x},${d.source.y} L${d.target.x},${d.target.y}`);
                    nodes.attr('transform', d => `translate(${d.x}, ${d.y})`); // Правильная позиция для групп
                });
            }
        </script>
    </body>
</html>