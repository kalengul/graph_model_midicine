<!DOCTYPE html>
<html>
    <head>
        <title>6baed99c-12c2-4b77-9d0f-167e27f98e12</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/index.css">
        <style>
            .Graphcontainer{
                width: 98%;
                height: 85vh;

                border: solid 0.5px black;
                border-radius: 7px;
            }

            .svgGraph{
                width: 100%;
                height: 100%;
            }   
        </style>
        <script src="./d3.v7.js"></script>
    </head>
    <body>
        <main>
            <div class="flex jc-center">
                <h1>6baed99c-12c2-4b77-9d0f-167e27f98e12</h1>
            </div>
            <br/>
            <div class='Graphcontainer' >
                <svg class='svgGraph'> </svg>
            </div>
        </main>

        <script>
            const colors = {
                selectNode: "#E8BD6D",
                selectLink: "#8B7474",
                node: "#E9EEF4",
                link: '#B8B5B5'
            }

            const nodeView = {
                r: 30
            }

            const graphData = {"directed":true,"multigraph":false,"graph":{},"nodes":[{"name":"ранолазин","label":"prepare","weight":5,"id":"6baed99c-12c2-4b77-9d0f-167e27f98e12","level":1,"r":30,"y":267.5,"x":1200},{"name":"ингибитор поздний ток ион натрий в клетка миокард","label":"mechanism","weight":5,"id":"a51281e1-671b-41ab-969d-a1877c44463f","level":2,"r":30,"y":397.5,"x":15.584415584415584},{"name":"внутрь","label":"absorbtion","weight":5,"id":"14bd7c4c-a9df-4110-9a40-b734fc505f81","level":2,"r":30,"y":397.5,"x":95.58441558441558},{"name":"печень","label":"metabol","weight":5,"id":"0d1e90c7-3842-4535-9745-a9c487860578","level":2,"r":30,"y":397.5,"x":175.58441558441558},{"name":"cyp3a4","label":"metabol","weight":5,"id":"82cfa2fb-f9e1-4acb-9a1a-145695e83ae8","level":3,"r":30,"y":527.5,"x":240},{"name":"cyp2d6","label":"metabol","weight":5,"id":"bd87ed7d-d65b-4d8b-bcaf-7d2365c75910","level":3,"r":30,"y":527.5,"x":320},{"name":"тромбоцитоз","label":"side_e","weight":5,"id":"80aca9a8-9952-4dad-aedc-0fa6073d41bb","level":2,"r":30,"y":397.5,"x":255.58441558441558},{"name":"лейкоцитоз","label":"side_e","weight":5,"id":"7bd0ad95-08c4-4309-a715-7557c0d8b914","level":2,"r":30,"y":397.5,"x":335.5844155844156},{"name":"снижение аппетит","label":"side_e","weight":5,"id":"51713946-35c7-4a09-9828-a3793ec29f5f","level":2,"r":30,"y":397.5,"x":415.5844155844156},{"name":"анорексия","label":"side_e","weight":5,"id":"a5ab8924-e4fe-4b5d-8605-61975df454ff","level":2,"r":30,"y":397.5,"x":495.5844155844156},{"name":"тревога","label":"side_e","weight":5,"id":"c4b3a528-fca2-4779-9df8-c893863fa6d7","level":2,"r":30,"y":397.5,"x":575.5844155844156},{"name":"бессонница","label":"side_e","weight":5,"id":"8f6fb0b1-8b27-4c1c-aa78-754f5d646a8a","level":2,"r":30,"y":397.5,"x":655.5844155844156},{"name":"спутанность сознание","label":"side_e","weight":5,"id":"948d8de6-182f-405b-b371-a77b1a142d89","level":2,"r":30,"y":397.5,"x":735.5844155844156},{"name":"галлюцинация","label":"side_e","weight":5,"id":"42c74fe3-4e97-4271-873a-ce83977263f6","level":2,"r":30,"y":397.5,"x":815.5844155844156},{"name":"дезориентация","label":"side_e","weight":5,"id":"0faa163a-292e-4b40-920f-b6525a8b15e1","level":2,"r":30,"y":397.5,"x":895.5844155844156},{"name":"головокружение","label":"side_e","weight":5,"id":"8a894ecd-7326-4eed-9bb8-ae0395f977b4","level":2,"r":30,"y":397.5,"x":975.5844155844156},{"name":"головной боль","label":"side_e","weight":5,"id":"61b24fed-86f4-401b-9d50-5e39b1fa6a28","level":2,"r":30,"y":397.5,"x":1055.5844155844156},{"name":"заторможенность","label":"side_e","weight":5,"id":"78b24df9-5edd-4c80-8fe9-ef63175a6b31","level":2,"r":30,"y":397.5,"x":1135.5844155844156},{"name":"обморок","label":"side_e","weight":5,"id":"5115466f-8d9a-450b-8957-b796d9f170a0","level":2,"r":30,"y":397.5,"x":1215.5844155844156},{"name":"гипестезия","label":"side_e","weight":5,"id":"007534b3-143a-48b9-8696-bcd62b8c202d","level":2,"r":30,"y":397.5,"x":1295.5844155844156},{"name":"сонливость","label":"side_e","weight":5,"id":"2af63472-a135-465a-b24c-6c65a5b7df94","level":2,"r":30,"y":397.5,"x":1375.5844155844156},{"name":"тремор","label":"side_e","weight":5,"id":"e97776bd-cab3-43ca-8ada-0e3fce8bdeba","level":2,"r":30,"y":397.5,"x":1455.5844155844156},{"name":"постуральной головокружение","label":"side_e","weight":5,"id":"c8449a92-1b86-40e8-9305-c4cae1bc8f76","level":2,"r":30,"y":397.5,"x":1535.5844155844156},{"name":"парестезия","label":"side_e","weight":5,"id":"80b0766b-dcb8-4d16-8f10-931eab7b004f","level":2,"r":30,"y":397.5,"x":1615.5844155844156},{"name":"амнезия","label":"side_e","weight":5,"id":"e3d1760c-4f32-42d6-a9b8-ec6665d25146","level":2,"r":30,"y":397.5,"x":1695.5844155844156},{"name":"снизить уровень сознание","label":"side_e","weight":5,"id":"607d48e2-d70f-4194-8250-50e747800498","level":2,"r":30,"y":397.5,"x":1775.5844155844156},{"name":"потеря сознание","label":"side_e","weight":5,"id":"b35a1897-67a9-42b2-bbd1-13b7bed76e29","level":2,"r":30,"y":397.5,"x":1855.5844155844156},{"name":"паросмий","label":"side_e","weight":5,"id":"6f9be653-42a6-4f5c-ab3a-ec343efb9ee4","level":2,"r":30,"y":397.5,"x":1935.5844155844156},{"name":"координация движение","label":"side_e","weight":5,"id":"a851f268-d4f8-4854-b3d4-5db7616a8b41","level":2,"r":30,"y":397.5,"x":2015.5844155844156},{"name":"походка","label":"side_e","weight":5,"id":"6ae87c8a-93ab-4016-b074-75143c4f93e9","level":2,"r":30,"y":397.5,"x":2095.5844155844156},{"name":"нечёткость зрение","label":"side_e","weight":5,"id":"ebedb172-f4a7-4306-a39c-339d56c0ed21","level":2,"r":30,"y":397.5,"x":2175.5844155844156},{"name":"зрительный расстройство","label":"side_e","weight":5,"id":"a14557d7-8106-4c14-bb11-23d0ba865024","level":2,"r":30,"y":397.5,"x":2255.5844155844156},{"name":"диплопия","label":"side_e","weight":5,"id":"d6f4d691-15de-413e-b6c5-a8a93d0637b5","level":2,"r":30,"y":397.5,"x":2335.5844155844156},{"name":"вертиго","label":"side_e","weight":5,"id":"4303ac13-cbe0-448c-9e61-444c177eaa63","level":2,"r":30,"y":397.5,"x":2415.5844155844156},{"name":"шум в ухо","label":"side_e","weight":5,"id":"4043c1ef-5552-46ee-b365-f1b83331917e","level":2,"r":30,"y":397.5,"x":2495.5844155844156},{"name":"снижение слух","label":"side_e","weight":5,"id":"0cf3ee43-75ac-431f-bc9d-d25284a82c5e","level":2,"r":30,"y":397.5,"x":2575.5844155844156},{"name":"удлинение корригировать интервал qtc","label":"side_e","weight":5,"id":"31cb71f1-0b61-478c-a2ba-561339661514","level":2,"r":30,"y":397.5,"x":2655.5844155844156},{"name":"«прилив» (прилив кровь к лицо)","label":"side_e","weight":5,"id":"efda898a-216f-46ad-bb5a-a6b960c16c88","level":2,"r":30,"y":397.5,"x":2735.5844155844156},{"name":"выраженный снижение ад","label":"side_e","weight":5,"id":"0fa8609e-7f05-47dd-aeca-2ae04daf503e","level":2,"r":30,"y":397.5,"x":2815.5844155844156},{"name":"похолодание конечность","label":"side_e","weight":5,"id":"39305999-8f9d-4486-a2e5-0bb419d220ba","level":2,"r":30,"y":397.5,"x":2895.5844155844156},{"name":"ортостатический гипотензия","label":"side_e","weight":5,"id":"6c0f3c73-b53e-4520-84ad-6f44c5bfc02c","level":2,"r":30,"y":397.5,"x":2975.5844155844156},{"name":"одышка","label":"side_e","weight":5,"id":"6ccf881e-0df7-4960-b509-a6dfc6e010a4","level":2,"r":30,"y":397.5,"x":3055.5844155844156},{"name":"кашель","label":"side_e","weight":5,"id":"59ccd252-423a-48d9-b1bc-96a33936f81c","level":2,"r":30,"y":397.5,"x":3135.5844155844156},{"name":"носовой кровотечение","label":"side_e","weight":5,"id":"f2907e46-dfb0-4e22-8de5-b08b74dfa703","level":2,"r":30,"y":397.5,"x":3215.5844155844156},{"name":"ощущение сдавление в горло","label":"side_e","weight":5,"id":"25136d34-98d1-419d-a832-4354c2b8e9be","level":2,"r":30,"y":397.5,"x":3295.5844155844156},{"name":"запор","label":"side_e","weight":5,"id":"2a75b269-1690-4afb-8fc6-7705de254d4e","level":2,"r":30,"y":397.5,"x":3375.5844155844156},{"name":"тошнота","label":"side_e","weight":5,"id":"62e78270-1bb2-403d-ada3-b2ee10b47ec4","level":2,"r":30,"y":397.5,"x":3455.5844155844156},{"name":"рвота","label":"side_e","weight":5,"id":"e16272c0-2945-41aa-9a55-8cdc48803642","level":2,"r":30,"y":397.5,"x":3535.5844155844156},{"name":"боль в живот","label":"side_e","weight":5,"id":"03727a4e-2c62-47bf-86a8-b81ee12e1c11","level":2,"r":30,"y":397.5,"x":3615.5844155844156},{"name":"сухость слизистый оболочка полость рот","label":"side_e","weight":5,"id":"7bdf69b9-7476-4f41-aefc-a697db6d1189","level":2,"r":30,"y":397.5,"x":3695.5844155844156},{"name":"диспепсия","label":"side_e","weight":5,"id":"f755ed13-e893-416f-89e3-abc277bb4c59","level":2,"r":30,"y":397.5,"x":3775.5844155844156},{"name":"метеоризм","label":"side_e","weight":5,"id":"1c15b34a-1625-4aa0-bb30-0a623136e781","level":2,"r":30,"y":397.5,"x":3855.5844155844156},{"name":"дискомфорт в область желудок","label":"side_e","weight":5,"id":"6314570c-e7ff-471a-8010-8f8adeccaab3","level":2,"r":30,"y":397.5,"x":3935.5844155844156},{"name":"панкреатит","label":"side_e","weight":5,"id":"8062d2ad-3b27-461e-8b32-ac2d97446372","level":2,"r":30,"y":397.5,"x":4015.5844155844156},{"name":"эрозивный дуоденит","label":"side_e","weight":5,"id":"a3753f6e-9b3e-424b-9aa3-bda6e6cfc172","level":2,"r":30,"y":397.5,"x":4095.5844155844156},{"name":"гипестезия полость рот","label":"side_e","weight":5,"id":"16f9ee51-9c98-4380-9699-16b136d14e31","level":2,"r":30,"y":397.5,"x":4175.584415584415},{"name":"кожный зуд","label":"side_e","weight":5,"id":"ba335769-5276-47d6-9816-34cecc9f4682","level":2,"r":30,"y":397.5,"x":4255.584415584415},{"name":"гипергидроза","label":"side_e","weight":5,"id":"f7b109e4-f7df-431d-86d2-dee6512f8cc5","level":2,"r":30,"y":397.5,"x":4335.584415584415},{"name":"аллергический дерматит","label":"side_e","weight":5,"id":"1d0c5f28-6712-4349-9ecf-12140140bfc4","level":2,"r":30,"y":397.5,"x":4415.584415584415},{"name":"крапивница","label":"side_e","weight":5,"id":"49015973-f250-4f1e-ac79-c98a00fcc43c","level":2,"r":30,"y":397.5,"x":4495.584415584415},{"name":"холодный пот","label":"side_e","weight":5,"id":"cda805f3-1ec0-4723-87de-415bce793033","level":2,"r":30,"y":397.5,"x":4575.584415584415},{"name":"кожный сыпь","label":"side_e","weight":5,"id":"522648ad-c742-430f-ad1b-0d34c83bebaf","level":2,"r":30,"y":397.5,"x":4655.584415584415},{"name":"ангионевротический отёк","label":"side_e","weight":5,"id":"eae76895-178e-4aec-a416-b70ae1ccd4a7","level":2,"r":30,"y":397.5,"x":4735.584415584415},{"name":"боль в конечность","label":"side_e","weight":5,"id":"6c124a99-b423-432e-afe9-13daafb21c27","level":2,"r":30,"y":397.5,"x":4815.584415584415},{"name":"мышечный спазм","label":"side_e","weight":5,"id":"18b5bd9b-dfe7-4825-a457-590a144eb6ac","level":2,"r":30,"y":397.5,"x":4895.584415584415},{"name":"припухлость сустав","label":"side_e","weight":5,"id":"f12dc9f1-f1d9-4eb5-83a9-4e04ddd752d1","level":2,"r":30,"y":397.5,"x":4975.584415584415},{"name":"дизурия","label":"side_e","weight":5,"id":"59b86948-aa09-449e-93a6-241e5accb126","level":2,"r":30,"y":397.5,"x":5055.584415584415},{"name":"гематурия","label":"side_e","weight":5,"id":"c11a0e79-2882-4510-aba1-220338bef5a3","level":2,"r":30,"y":397.5,"x":5135.584415584415},{"name":"хроматурия","label":"side_e","weight":5,"id":"3fe84b9e-57c5-4f0a-bf42-0cc5a2163094","level":2,"r":30,"y":397.5,"x":5215.584415584415},{"name":"острый почечный недостаточность","label":"side_e","weight":5,"id":"2c25138d-092d-4c20-912a-761079369647","level":2,"r":30,"y":397.5,"x":5295.584415584415},{"name":"задержка моча","label":"side_e","weight":5,"id":"ba0856cd-3a5c-46f8-ba9d-51a12a9f08b7","level":2,"r":30,"y":397.5,"x":5375.584415584415},{"name":"эректильный дисфункция","label":"side_e","weight":5,"id":"e95cd0e4-0861-49dc-9fc1-91b64fa135dc","level":2,"r":30,"y":397.5,"x":5455.584415584415},{"name":"астения","label":"side_e","weight":5,"id":"dcacce3f-f38a-4817-bc32-3b4a100f90dc","level":2,"r":30,"y":397.5,"x":5535.584415584415},{"name":"повышенный утомляемость","label":"side_e","weight":5,"id":"e2287e90-f337-437f-bfbe-a957e03c3463","level":2,"r":30,"y":397.5,"x":5615.584415584415},{"name":"периферический отёк","label":"side_e","weight":5,"id":"3a34c2e5-b4f1-4337-8ffa-480b444953ff","level":2,"r":30,"y":397.5,"x":5695.584415584415},{"name":"повышение концентрация креатинин в плазма кровь","label":"side_e","weight":5,"id":"19414bb8-4bce-4843-b117-3c96891fb035","level":2,"r":30,"y":397.5,"x":5775.584415584415},{"name":"повышение концентрация мочевина в плазма кровь","label":"side_e","weight":5,"id":"87e69ea3-b1ba-4fa5-980f-0511cd891c3c","level":2,"r":30,"y":397.5,"x":5855.584415584415},{"name":"снижение масса тело","label":"side_e","weight":5,"id":"b06a189b-023d-40cd-b0f4-64b4936aced5","level":2,"r":30,"y":397.5,"x":5935.584415584415},{"name":"повышение активность «печёночный» фермент","label":"side_e","weight":5,"id":"d0863614-f076-4dcc-8bef-3fe71ada2b1c","level":2,"r":30,"y":397.5,"x":6015.584415584415},{"name":"антиангинальный средство","label":"group","weight":5,"id":"1a30d32f-74fe-47b6-8459-168287fe9fef","level":0,"r":30,"y":137.5,"x":1200},{"name":"снижение внутриклеточный накопление натрий","label":"mechanism","weight":5,"id":"127037cd-03cc-4aef-adcf-329333486d48","level":3,"r":30,"y":527.5,"x":400},{"name":"уменьшение избыток внутриклеточный ион кальций","label":"action","weight":5,"id":"6dac9c5c-0f56-4a7f-8fd2-2f4b1a228fce","level":4,"r":30,"y":657.5,"x":400},{"name":"уменьшать внутриклеточный ионный дисбаланс при ишемия","label":"action","weight":5,"id":"20a83188-2630-4fef-8127-ea3b2ae47b67","level":5,"r":30,"y":787.5,"x":1200},{"name":"расслабление миокард","label":"action","weight":5,"id":"6014c13b-a178-46d3-8e5d-8c4a8e73673f","level":6,"r":30,"y":917.5,"x":1200},{"name":"снижать диастолический напряжение стенка желудочек","label":"action","weight":5,"id":"b1054b1d-2860-40bf-9975-4924fd7b7149","level":7,"r":30,"y":1047.5,"x":1200},{"name":"моча","label":"excretion","weight":5,"id":"ed71addd-0892-40c4-af06-001fd7e3514a","level":3,"r":30,"y":527.5,"x":480},{"name":"кал","label":"excretion","weight":5,"id":"7b3a83dd-e77a-4ab2-85d1-5e7bc37c4fbc","level":3,"r":30,"y":527.5,"x":560},{"name":"печень","label":"excretion","weight":5,"id":"de75ee92-f31f-4058-9b92-2645c763ec54","level":2,"r":30,"y":397.5,"x":6095.584415584415},{"name":"дегидратация","label":"side_e","weight":5,"id":"83afd3a6-c483-4b96-8933-eec8a7d50de5","level":4,"r":30,"y":657.5,"x":480},{"name":"гипонатриемия","label":"side_e","weight":5,"id":"4be336a6-44c1-468a-b0b8-bd06424329a0","level":4,"r":30,"y":657.5,"x":560}],"links":[{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"80aca9a8-9952-4dad-aedc-0fa6073d41bb"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"7bd0ad95-08c4-4309-a715-7557c0d8b914"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"51713946-35c7-4a09-9828-a3793ec29f5f"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"a5ab8924-e4fe-4b5d-8605-61975df454ff"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"c4b3a528-fca2-4779-9df8-c893863fa6d7"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"8f6fb0b1-8b27-4c1c-aa78-754f5d646a8a"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"948d8de6-182f-405b-b371-a77b1a142d89"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"42c74fe3-4e97-4271-873a-ce83977263f6"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"0faa163a-292e-4b40-920f-b6525a8b15e1"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"8a894ecd-7326-4eed-9bb8-ae0395f977b4"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"61b24fed-86f4-401b-9d50-5e39b1fa6a28"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"78b24df9-5edd-4c80-8fe9-ef63175a6b31"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"5115466f-8d9a-450b-8957-b796d9f170a0"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"007534b3-143a-48b9-8696-bcd62b8c202d"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"2af63472-a135-465a-b24c-6c65a5b7df94"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"e97776bd-cab3-43ca-8ada-0e3fce8bdeba"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"c8449a92-1b86-40e8-9305-c4cae1bc8f76"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"80b0766b-dcb8-4d16-8f10-931eab7b004f"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"e3d1760c-4f32-42d6-a9b8-ec6665d25146"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"607d48e2-d70f-4194-8250-50e747800498"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"b35a1897-67a9-42b2-bbd1-13b7bed76e29"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6f9be653-42a6-4f5c-ab3a-ec343efb9ee4"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"a851f268-d4f8-4854-b3d4-5db7616a8b41"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6ae87c8a-93ab-4016-b074-75143c4f93e9"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"ebedb172-f4a7-4306-a39c-339d56c0ed21"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"a14557d7-8106-4c14-bb11-23d0ba865024"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"d6f4d691-15de-413e-b6c5-a8a93d0637b5"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"4303ac13-cbe0-448c-9e61-444c177eaa63"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"4043c1ef-5552-46ee-b365-f1b83331917e"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"0cf3ee43-75ac-431f-bc9d-d25284a82c5e"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"31cb71f1-0b61-478c-a2ba-561339661514"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"efda898a-216f-46ad-bb5a-a6b960c16c88"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"0fa8609e-7f05-47dd-aeca-2ae04daf503e"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"39305999-8f9d-4486-a2e5-0bb419d220ba"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6c0f3c73-b53e-4520-84ad-6f44c5bfc02c"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6ccf881e-0df7-4960-b509-a6dfc6e010a4"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"59ccd252-423a-48d9-b1bc-96a33936f81c"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"f2907e46-dfb0-4e22-8de5-b08b74dfa703"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"25136d34-98d1-419d-a832-4354c2b8e9be"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"2a75b269-1690-4afb-8fc6-7705de254d4e"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"62e78270-1bb2-403d-ada3-b2ee10b47ec4"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"e16272c0-2945-41aa-9a55-8cdc48803642"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"03727a4e-2c62-47bf-86a8-b81ee12e1c11"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"7bdf69b9-7476-4f41-aefc-a697db6d1189"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"f755ed13-e893-416f-89e3-abc277bb4c59"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"1c15b34a-1625-4aa0-bb30-0a623136e781"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6314570c-e7ff-471a-8010-8f8adeccaab3"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"8062d2ad-3b27-461e-8b32-ac2d97446372"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"a3753f6e-9b3e-424b-9aa3-bda6e6cfc172"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"16f9ee51-9c98-4380-9699-16b136d14e31"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"ba335769-5276-47d6-9816-34cecc9f4682"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"f7b109e4-f7df-431d-86d2-dee6512f8cc5"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"1d0c5f28-6712-4349-9ecf-12140140bfc4"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"49015973-f250-4f1e-ac79-c98a00fcc43c"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"cda805f3-1ec0-4723-87de-415bce793033"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"522648ad-c742-430f-ad1b-0d34c83bebaf"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"eae76895-178e-4aec-a416-b70ae1ccd4a7"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"6c124a99-b423-432e-afe9-13daafb21c27"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"18b5bd9b-dfe7-4825-a457-590a144eb6ac"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"f12dc9f1-f1d9-4eb5-83a9-4e04ddd752d1"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"59b86948-aa09-449e-93a6-241e5accb126"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"c11a0e79-2882-4510-aba1-220338bef5a3"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"3fe84b9e-57c5-4f0a-bf42-0cc5a2163094"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"2c25138d-092d-4c20-912a-761079369647"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"ba0856cd-3a5c-46f8-ba9d-51a12a9f08b7"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"e95cd0e4-0861-49dc-9fc1-91b64fa135dc"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"dcacce3f-f38a-4817-bc32-3b4a100f90dc"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"e2287e90-f337-437f-bfbe-a957e03c3463"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"3a34c2e5-b4f1-4337-8ffa-480b444953ff"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"19414bb8-4bce-4843-b117-3c96891fb035"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"87e69ea3-b1ba-4fa5-980f-0511cd891c3c"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"b06a189b-023d-40cd-b0f4-64b4936aced5"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"d0863614-f076-4dcc-8bef-3fe71ada2b1c"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"a51281e1-671b-41ab-969d-a1877c44463f"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"14bd7c4c-a9df-4110-9a40-b734fc505f81"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"0d1e90c7-3842-4535-9745-a9c487860578"},{"source":"6baed99c-12c2-4b77-9d0f-167e27f98e12","target":"de75ee92-f31f-4058-9b92-2645c763ec54"},{"source":"a51281e1-671b-41ab-969d-a1877c44463f","target":"127037cd-03cc-4aef-adcf-329333486d48"},{"source":"0d1e90c7-3842-4535-9745-a9c487860578","target":"82cfa2fb-f9e1-4acb-9a1a-145695e83ae8"},{"source":"0d1e90c7-3842-4535-9745-a9c487860578","target":"bd87ed7d-d65b-4d8b-bcaf-7d2365c75910"},{"source":"1a30d32f-74fe-47b6-8459-168287fe9fef","target":"6baed99c-12c2-4b77-9d0f-167e27f98e12"},{"source":"127037cd-03cc-4aef-adcf-329333486d48","target":"6dac9c5c-0f56-4a7f-8fd2-2f4b1a228fce"},{"source":"127037cd-03cc-4aef-adcf-329333486d48","target":"83afd3a6-c483-4b96-8933-eec8a7d50de5"},{"source":"127037cd-03cc-4aef-adcf-329333486d48","target":"4be336a6-44c1-468a-b0b8-bd06424329a0"},{"source":"6dac9c5c-0f56-4a7f-8fd2-2f4b1a228fce","target":"20a83188-2630-4fef-8127-ea3b2ae47b67"},{"source":"20a83188-2630-4fef-8127-ea3b2ae47b67","target":"6014c13b-a178-46d3-8e5d-8c4a8e73673f"},{"source":"6014c13b-a178-46d3-8e5d-8c4a8e73673f","target":"b1054b1d-2860-40bf-9975-4924fd7b7149"},{"source":"de75ee92-f31f-4058-9b92-2645c763ec54","target":"ed71addd-0892-40c4-af06-001fd7e3514a"},{"source":"de75ee92-f31f-4058-9b92-2645c763ec54","target":"7b3a83dd-e77a-4ab2-85d1-5e7bc37c4fbc"}],"name":["6baed99c-12c2-4b77-9d0f-167e27f98e12"],"maxLevel":8,"levelsInfo":{"levelNodesCount":{"0":1,"1":1,"2":77,"3":5,"4":3,"5":1,"6":1,"7":1}},"isParse":true}
            const window_params = {"width":1200,"height":600,"xStep":50,"yStep":100}

            console.log(graphData)

            

            if (graphData){
                const svg = d3.select("svg")
                svg.selectAll("*").remove() // Очистка предыдущего графа

                svg.attr("width",   window_params.width) //Устанавливает атрибут width
                .attr("height",   window_params.height)
                .append("g").attr('class', 'group') //добавляет новый элемент, тег которого передается в метод в качестве параметра

                const svgGroup = svg.select('g.group')

                // Масштабирование и перемещение
                const zoom = d3.zoom()
                .scaleExtent([0.1, 10])
                .on("zoom", (event)=>{ //Обновление позиционирования элементов при масштабировании
                    svgGroup.attr("transform", event.transform);
                });
                svg.call(zoom);


                const dragstarted = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0.3).restart(); // Увеличиваем "температуру" симуляции для более плавного движения
                    d.fx = d.x; // Фиксируем позицию узла
                    d.fy = d.y;
                }
                
                const dragged = (event, d)=>{
                    d.fx = event.x; // Обновляем фиксированные координаты узла
                    d.fy = event.y;
                }
                
                const dragended = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0); // Охлаждаем симуляцию после перетаскивания
                    d.fx = null; // Отпускаем узел, позволяя симуляции снова влиять на его позицию
                    d.fy = null;
                }

                // Создаем обработчик drag
                const drag = d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);


                // Определение маркера стрелки
                svgGroup.append("defs")
                .append("marker")
                .attr("id", "arrowhead")
                .attr("markerWidth", 5) //Размер области, в которой будет отображаться маркер
                .attr("markerHeight", 4)
                .attr("refX", nodeView.r+4)
                .attr("refY", 2)
                .attr("orient", "auto")
                .append("polygon")
                .attr("points", "0 0, 5 2, 0 4")
                .style("fill", colors.link);

                
                //Добавление ссылок
                let links = svgGroup.append("g").attr('class', 'links')
                .selectAll('.link')
                .data(graphData.links) //Добавление данных
                .enter() //Нужен для ввода дополнительных значений (так как data привязывает только первое)
                .append('path')
                .attr('class', 'link')
                .attr('stroke', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return colors.selectLink
                    return colors.link
                }) // Цвет линии ребра
                .attr('stroke-width', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return 2
                    return 1
                }) // Ширина линии ребра
                .attr("marker-end", "url(#arrowhead)") // Добавление стрелки в конец ребра
                .style('pointer-events', 'none') //(устанавливает стиль) Отключение событий на ребрах (клики и т.д.)

                // Создание узлов
                let nodes = svgGroup.append("g").attr('class', 'nodes')
                .selectAll('.node')
                .data(graphData.nodes)
                .enter()
                .append('g')
                .attr('class', 'node')
                .call(drag);

                nodes.append('circle')
                .attr('class', 'node')
                .attr('id', d => d.id)
                .attr('r', d => d.r) // Радиус узла
                .attr('fill', d=>{
                    //if(selectedNodes.sourseNode === d.id || selectedNodes.targetNode === d.id) return colors.selectNode
                    return colors.node
                }) // Цвет заполнения
                .attr("cursor", "pointer")
                .on('click', (event, d) => {
                    // Добавьте логику для обработки клика по узлу
                });

                //Отображение текста v2
                nodes.append('foreignObject')
                .attr('x', d => -d.r * 0.8)
                .attr('y', d => -d.r * 0.8)
                .attr('width', d => d.r * 1.6)
                .attr('height', d => d.r * 1.6)
                .append('xhtml:div')
                .style('display', 'flex')
                .style('justify-content', 'center')
                .style('align-items', 'center')
                .style('width', '100%')
                .style('height', '100%')
                .style('font-size', '5px')
                .style('text-anchor', 'middle')
                .style('word-wrap', 'break-word')
                .style('overflow', 'hidden')
                .style('pointer-events', 'none')
                .text(d => d.name);

                //Создание симуляции силы v3
                const simulation = d3.forceSimulation(graphData.nodes)
                // Связи между узлами
                .force("link", d3.forceLink(graphData.links).id(d => d.id))//.distance(nodeView.r*10)) //!!! Сила в зависимости от количества узлов в уровне!!!!!
                // Отталкивание узлов
                .force("charge", d3.forceManyBody(graphData.nodes).strength(d=>graphData.levelsInfo.levelNodesCount[d.level]*(-100)))//-3000))
                // Центрирование по x
                .force("center", d3.forceCenter( window_params.width / 2,  window_params.height / 2))
                // Выравнивание по уровням
                .force("y", d3.forceY().strength(6)
                    .y(d =>  window_params.height * ((d.level+1) / (graphData.maxLevel-1)))) //!!!!!!!!!!Уровень с большим числом узлов шире, чем с меньшим
                // Отталкивание по x в рамках одного уровня
                .force("x", d3.forceX().strength(0.05)
                    .x( window_params.width / 2))
                // Дополнительная сила для предотвращения наложения узлов
                .force("collision", d3.forceCollide().radius(40));

                // Обновление позиций узлов и связей при каждой итерации симуляции
                //Обновление симуляции
                simulation.on('tick', () => {
                    links.attr("d", d => `M${d.source.x},${d.source.y} L${d.target.x},${d.target.y}`);
                    nodes.attr('transform', d => `translate(${d.x}, ${d.y})`); // Правильная позиция для групп
                });
            }
        </script>
    </body>
</html>