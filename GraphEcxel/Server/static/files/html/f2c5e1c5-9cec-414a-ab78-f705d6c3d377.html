<!DOCTYPE html>
<html>
    <head>
        <title>2bf5ce72-3e1f-4ff7-af42-f88ba4527e68</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./css/index.css">
        <style>
            .Graphcontainer{
                width: 98%;
                height: 85vh;

                border: solid 0.5px black;
                border-radius: 7px;
            }

            .svgGraph{
                width: 100%;
                height: 100%;
            }   
        </style>
        <script src="./d3.v7.js"></script>
    </head>
    <body>
        <main>
            <div class="flex jc-center">
                <h1>2bf5ce72-3e1f-4ff7-af42-f88ba4527e68</h1>
            </div>
            <br/>
            <div class='Graphcontainer' >
                <svg class='svgGraph'> </svg>
            </div>
        </main>

        <script>
            const colors = {
                selectNode: "#E8BD6D",
                selectLink: "#8B7474",
                node: "#E9EEF4",
                link: '#B8B5B5'
            }

            const nodeView = {
                r: 30
            }

            const graphData = {"directed":true,"multigraph":false,"graph":{},"nodes":[{"name":"периндоприл","label":"prepare","weight":5,"id":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","level":2,"r":30,"y":380,"x":1200},{"name":"ингибитор апф","label":"mechanism","weight":5,"id":"fc65abae-9877-4e9c-b71b-ac465d69fca8","level":4,"r":30,"y":640,"x":600},{"name":"уменьшать опсс","label":"action","weight":5,"id":"0d359b4d-f4b5-4f37-8cd7-225b83332329","level":9,"r":30,"y":1290,"x":240},{"name":"периферический кровоток ускоряться без изменение частота сердечный сокращение (чсс)","label":"action","weight":5,"id":"90a81ce7-2b8d-44d9-a97d-042328a43676","level":10,"r":30,"y":1420,"x":240},{"name":"гипокалиемия","label":"side_e","weight":5,"id":"cae8d309-1bb4-4cb2-b10f-ccedfb9aa531","level":3,"r":30,"y":510,"x":16.901408450704224},{"name":"почка","label":"excretion","weight":5,"id":"0aedb021-6667-405d-9554-fed871b556d9","level":3,"r":30,"y":510,"x":96.90140845070422},{"name":"парестезия","label":"side_e","weight":5,"id":"8d4889c3-0987-43ff-baf6-5a4e17350647","level":3,"r":30,"y":510,"x":176.90140845070422},{"name":"вертиго","label":"side_e","weight":5,"id":"e65beadc-3c92-4aeb-b354-6bfa693cad79","level":3,"r":30,"y":510,"x":256.90140845070425},{"name":"звон в ухо","label":"side_e","weight":5,"id":"fe3e18e5-35e7-40c3-bb30-0cf4f7419f8e","level":3,"r":30,"y":510,"x":336.90140845070425},{"name":"боль в живот","label":"side_e","weight":5,"id":"50309380-6953-4fb4-94b8-4c249bd7f9d9","level":3,"r":30,"y":510,"x":416.90140845070425},{"name":"запор","label":"side_e","weight":5,"id":"ad93e813-6730-494d-9f30-87b12d06797e","level":3,"r":30,"y":510,"x":496.90140845070425},{"name":"диарея","label":"side_e","weight":5,"id":"8d2f79b0-ddf4-4d2a-8281-9df636e320f5","level":3,"r":30,"y":510,"x":576.9014084507043},{"name":"диспепсия","label":"side_e","weight":5,"id":"4b095e2d-b9cb-4f57-90be-fa0f24c560ff","level":3,"r":30,"y":510,"x":656.9014084507043},{"name":"рвота","label":"side_e","weight":5,"id":"7b42c175-c7f5-441e-b6b6-dc641f670a32","level":14,"r":30,"y":1940,"x":1200},{"name":"кожный зуд","label":"side_e","weight":5,"id":"2e7f741d-beda-4cfe-87bb-83c4d988dbab","level":3,"r":30,"y":510,"x":736.9014084507043},{"name":"кожный сыпь","label":"side_e","weight":5,"id":"d8631928-85a4-4b75-bb76-f55fa3501639","level":3,"r":30,"y":510,"x":816.9014084507043},{"name":"спазм мышца","label":"side_e","weight":5,"id":"ffe34eda-7160-42af-9928-258e0d5026e4","level":3,"r":30,"y":510,"x":896.9014084507043},{"name":"астения","label":"side_e","weight":5,"id":"4cab3704-2e1f-407e-bbca-b16a748d5a9c","level":3,"r":30,"y":510,"x":976.9014084507043},{"name":"агранулоцитоз","label":"side_e","weight":5,"id":"8fe51640-0909-4ad2-8be1-19614e219aee","level":3,"r":30,"y":510,"x":1056.9014084507044},{"name":"панцитопения","label":"side_e","weight":5,"id":"689f3141-d7f0-4527-88a4-c322b76cfe4a","level":3,"r":30,"y":510,"x":1136.9014084507044},{"name":"снижение гематокрит","label":"side_e","weight":5,"id":"56c9b376-3698-40c9-ac90-0113a045aa68","level":3,"r":30,"y":510,"x":1216.9014084507044},{"name":"лейкопения","label":"side_e","weight":5,"id":"daef445a-ddd4-4ceb-9a62-b08d920ce228","level":3,"r":30,"y":510,"x":1296.9014084507044},{"name":"нейтропение","label":"side_e","weight":5,"id":"de243ccc-4f90-4a7b-a117-38acc3b3b2ad","level":3,"r":30,"y":510,"x":1376.9014084507044},{"name":"гемолитический анемия","label":"side_e","weight":5,"id":"37a8e297-ad2e-48a6-9087-2cc709d747d0","level":3,"r":30,"y":510,"x":1456.9014084507044},{"name":"тромбоцитопения","label":"side_e","weight":5,"id":"837cee17-ac5a-4c51-9cde-7cb25ebacc42","level":3,"r":30,"y":510,"x":1536.9014084507044},{"name":"гипогликемия","label":"side_e","weight":5,"id":"1f456aa7-f73e-49b6-95e1-34c5d90ca6af","level":3,"r":30,"y":510,"x":1616.9014084507044},{"name":"гипонатриемия","label":"side_e","weight":5,"id":"bbc5dc52-b762-4322-b8f8-8a5c7bf542e4","level":3,"r":30,"y":510,"x":1696.9014084507044},{"name":"лабильность настроение","label":"side_e","weight":5,"id":"74670b32-50a1-4165-9bb5-693272d4390e","level":3,"r":30,"y":510,"x":1776.9014084507044},{"name":"депрессия","label":"side_e","weight":5,"id":"cb484758-b284-42a6-887b-31eb82f156cc","level":3,"r":30,"y":510,"x":1856.9014084507044},{"name":"сонливость","label":"side_e","weight":5,"id":"0b582f96-d371-415b-98d1-8e2230617a74","level":3,"r":30,"y":510,"x":1936.9014084507044},{"name":"обморочный","label":"side_e","weight":5,"id":"ac7bebd3-3772-4348-b86a-af4feb217c91","level":3,"r":30,"y":510,"x":2016.9014084507044},{"name":"спутанность сознание","label":"side_e","weight":5,"id":"f8b26f46-d3e9-4134-9008-e91a49f596fb","level":3,"r":30,"y":510,"x":2096.9014084507044},{"name":"звон","label":"side_e","weight":5,"id":"efb93634-bf38-4419-a11b-d6d5570762f3","level":3,"r":30,"y":510,"x":2176.9014084507044},{"name":"ощущение","label":"side_e","weight":5,"id":"9fac99ed-24b8-44c1-a8cc-c731cbb6e3db","level":3,"r":30,"y":510,"x":2256.9014084507044},{"name":"тахикардия","label":"side_e","weight":5,"id":"8954a513-4d5d-4a10-866c-14c6fd0e7ab9","level":3,"r":30,"y":510,"x":2336.9014084507044},{"name":"стенокардия","label":"side_e","weight":5,"id":"cb2326f8-e2e8-437d-a35b-3b2e3a340048","level":3,"r":30,"y":510,"x":2416.9014084507044},{"name":"аритмия","label":"side_e","weight":5,"id":"d847415a-088d-4b40-af72-798da05fc352","level":3,"r":30,"y":510,"x":2496.9014084507044},{"name":"инфаркт миокард","label":"side_e","weight":5,"id":"ccdba2d3-2a15-43ee-b1ed-463f4a347a71","level":3,"r":30,"y":510,"x":2576.9014084507044},{"name":"васкулит","label":"side_e","weight":5,"id":"21788b8d-c008-476a-a926-27ded2bfa865","level":3,"r":30,"y":510,"x":2656.9014084507044},{"name":"инсульт","label":"side_e","weight":5,"id":"5fbc3c60-e098-4baf-bfd1-079e796f4fe1","level":3,"r":30,"y":510,"x":2736.9014084507044},{"name":"синдром рейно","label":"side_e","weight":5,"id":"9f099efb-765f-4fe2-a2cd-1036094f3c66","level":3,"r":30,"y":510,"x":2816.9014084507044},{"name":"бронхоспазм","label":"side_e","weight":5,"id":"05f1a41b-1182-47b0-8041-5ca1351c0b1e","level":3,"r":30,"y":510,"x":2896.9014084507044},{"name":"эозинофильный пневмония","label":"side_e","weight":5,"id":"0216d14a-bf70-47a9-89c8-8cead9d33231","level":3,"r":30,"y":510,"x":2976.9014084507044},{"name":"ринит","label":"side_e","weight":5,"id":"d322b1f0-854b-459d-946b-80c55b1af551","level":3,"r":30,"y":510,"x":3056.9014084507044},{"name":"дисгевзия","label":"side_e","weight":5,"id":"646486dc-960d-41c4-88a2-c0e50765e819","level":3,"r":30,"y":510,"x":3136.9014084507044},{"name":"панкреатит","label":"side_e","weight":5,"id":"aae63511-2a89-4718-a324-9e5136be693f","level":3,"r":30,"y":510,"x":3216.9014084507044},{"name":"крапивница","label":"side_e","weight":5,"id":"1f6adb05-440d-4a11-897f-44423fa49f3b","level":3,"r":30,"y":510,"x":3296.9014084507044},{"name":"реакция фоточувствительность","label":"side_e","weight":5,"id":"124f091a-b7d5-4665-a1d8-dc7642762aa9","level":3,"r":30,"y":510,"x":3376.9014084507044},{"name":"пемфигоид","label":"side_e","weight":5,"id":"3f486aee-8b72-4c4e-ac9d-08eb0c4792fa","level":3,"r":30,"y":510,"x":3456.9014084507044},{"name":"повышенный потоотделение","label":"side_e","weight":5,"id":"0ef9929d-adfb-4c46-af37-9a0236734a91","level":3,"r":30,"y":510,"x":3536.9014084507044},{"name":"обострение псориаз","label":"side_e","weight":5,"id":"39393c06-7063-43ec-809d-63aeee52206e","level":3,"r":30,"y":510,"x":3616.9014084507044},{"name":"многоформный эритема","label":"side_e","weight":5,"id":"e66f18b5-0a14-4e80-96b4-435942e28318","level":3,"r":30,"y":510,"x":3696.9014084507044},{"name":"мышечный спазм","label":"side_e","weight":5,"id":"97f4d3a8-0e09-472f-b270-1c2efc84b7d6","level":3,"r":30,"y":510,"x":3776.9014084507044},{"name":"артралгия","label":"side_e","weight":5,"id":"ea6f799b-9aeb-4428-bada-dd74da4b9252","level":3,"r":30,"y":510,"x":3856.9014084507044},{"name":"миалгия","label":"side_e","weight":5,"id":"a8e7f323-37e0-4abb-a446-2c63c9de51e2","level":3,"r":30,"y":510,"x":3936.9014084507044},{"name":"острый почечный недостаточность","label":"side_e","weight":5,"id":"eae7167e-ccfa-43ed-89ba-f028a5b9fe7e","level":3,"r":30,"y":510,"x":4016.9014084507044},{"name":"олигурия","label":"side_e","weight":5,"id":"ccb7110f-1332-431f-ad23-f859b62ed085","level":3,"r":30,"y":510,"x":4096.901408450704},{"name":"анурия","label":"side_e","weight":5,"id":"ef6d027d-c368-432c-a0df-6ffc6e8a7668","level":3,"r":30,"y":510,"x":4176.901408450704},{"name":"эректильный дисфункция","label":"side_e","weight":5,"id":"a35b8c50-71ae-4651-b02c-3b67658dc46a","level":3,"r":30,"y":510,"x":4256.901408450704},{"name":"боль в грудной клетка","label":"side_e","weight":5,"id":"2e1a3c07-1ab9-4bfb-af25-3a255597031f","level":3,"r":30,"y":510,"x":4336.901408450704},{"name":"недомогание","label":"side_e","weight":5,"id":"1693b85e-b178-441b-938f-e09ee3b0987c","level":3,"r":30,"y":510,"x":4416.901408450704},{"name":"лихорадка","label":"side_e","weight":5,"id":"f4d8ffb2-8c50-450d-b311-b4eae4b1088f","level":3,"r":30,"y":510,"x":4496.901408450704},{"name":"повышение концентрация мочевина в плазма кровь","label":"side_e","weight":5,"id":"ac7e0a81-f10c-49d1-80a1-2e1b57ac6a56","level":3,"r":30,"y":510,"x":4576.901408450704},{"name":"повышение концентрация креатинин в плазма кровь","label":"side_e","weight":5,"id":"ca556f75-6c9d-4e7c-8779-de39d1f956f6","level":3,"r":30,"y":510,"x":4656.901408450704},{"name":"повышение концентрация билирубин в плазма кровь","label":"side_e","weight":5,"id":"836fc4db-6832-4355-a2f6-7b621764d814","level":3,"r":30,"y":510,"x":4736.901408450704},{"name":"повышение активность «печёночный» фермент в плазма кровь","label":"side_e","weight":5,"id":"0ad3fc42-709b-415f-8689-0a539eb922be","level":3,"r":30,"y":510,"x":4816.901408450704},{"name":"синдром неадекватный секреция антидиуретический гормон (снс адг)","label":"side_e","weight":5,"id":"883f6b5d-5c85-4238-81b8-596022c18358","level":3,"r":30,"y":510,"x":4896.901408450704},{"name":"выраженный","label":"side_e","weight":5,"id":"11257a16-626c-43e3-8885-9f163e131b87","level":3,"r":30,"y":510,"x":4976.901408450704},{"name":"снижение ад","label":"side_e","weight":5,"id":"bffd0209-c07e-4783-b10f-0b2602de11c1","level":3,"r":30,"y":510,"x":5056.901408450704},{"name":"внезапный остановка сердце","label":"side_e","weight":5,"id":"53aeb358-e5c2-42e4-b3a1-08a1eac702cd","level":3,"r":30,"y":510,"x":5136.901408450704},{"name":"повышение частота сердечнососудистый заболеваемость и смертность","label":"side_e","weight":5,"id":"f1199867-5788-4b14-b52a-d0561c46f01d","level":3,"r":30,"y":510,"x":5216.901408450704},{"name":"тяжёлый анафилактоидный реакция","label":"side_e","weight":5,"id":"c058b922-766e-4369-bd61-69fad1951021","level":3,"r":30,"y":510,"x":5296.901408450704},{"name":"увеличение концентрация литий в сыворотка кровь","label":"side_e","weight":5,"id":"915ccc02-36c9-459b-b918-f280d62363e8","level":3,"r":30,"y":510,"x":5376.901408450704},{"name":"токсический эффект","label":"side_e","weight":5,"id":"17080f31-aa3e-451b-8fc5-1076efdf8490","level":3,"r":30,"y":510,"x":5456.901408450704},{"name":"средство, действовать на ренин-ангиотензиновый система","label":"group","weight":5,"id":"06b3dd5d-bc00-47e4-8630-3c37e8643f83","level":0,"r":30,"y":120,"x":1200},{"name":"ингибитор ангиотензинпревращать фермент (апф)","label":"group","weight":5,"id":"820f139d-9f59-4a1d-880e-d2206dca7b2c","level":1,"r":30,"y":250,"x":1200},{"name":"снижение содержание ангитензин ii в плазма кровь","label":"mechanism","weight":5,"id":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","level":5,"r":30,"y":770,"x":600},{"name":"активироваться система простагландин","label":"mechanism","weight":5,"id":"5080ca6a-31eb-4423-8857-a274c04bb51c","level":7,"r":30,"y":1030,"x":600},{"name":"повышаться активность ренин в плазма кровь","label":"mechanism","weight":5,"id":"ba1123a3-0670-4c51-9955-1bb7c432622f","level":6,"r":30,"y":900,"x":300},{"name":"снижаться секреция альдостерон","label":"mechanism","weight":5,"id":"e27499e2-0c69-446a-a512-fd410612eb58","level":6,"r":30,"y":900,"x":380},{"name":"ингибитор разрушение брадикинин","label":"mechanism","weight":5,"id":"f09f78f2-16c6-4e0b-ad13-4f8ffbfb862e","level":5,"r":30,"y":770,"x":680},{"name":"периндоприлат","label":"prepare","weight":5,"id":"cbf5ef95-d351-42ac-935c-c2127803bfaa","level":3,"r":30,"y":510,"x":5536.901408450704},{"name":"оказывать сосудорасширяющий действие","label":"action","weight":5,"id":"95b11002-149f-49f4-aa79-2fb1a42c5829","level":8,"r":30,"y":1160,"x":400},{"name":"уменьшать гипертрофия левый желудочек","label":"action","weight":5,"id":"a311dd9e-95aa-493e-afe0-f2f07172b472","level":12,"r":30,"y":1680,"x":600},{"name":"кашель","label":"side_e","weight":5,"id":"7e478b6d-4773-4611-a768-1aa80378421e","level":8,"r":30,"y":1160,"x":480},{"name":"прилив","label":"side_e","weight":5,"id":"7ebf038b-d3de-4042-99c6-c1affacffad2","level":9,"r":30,"y":1290,"x":320},{"name":"периферический отёк","label":"side_e","weight":5,"id":"6ef24d75-1d29-43b8-a8bc-ec8c8ff00a34","level":9,"r":30,"y":1290,"x":400},{"name":"почечный недостаточность","label":"side_e","weight":5,"id":"92dae2b7-59cc-4858-bee7-7c9c2b386ee6","level":4,"r":30,"y":640,"x":680},{"name":"артериальный гипотензия","label":"side_e","weight":5,"id":"4cbc0041-822f-4596-8e36-de9dbec4c294","level":12,"r":30,"y":1680,"x":680},{"name":"головокружение","label":"side_e","weight":5,"id":"cf0298d9-e808-4174-9c23-17fe8e0e8cfb","level":13,"r":30,"y":1810,"x":300},{"name":"головной боль","label":"side_e","weight":5,"id":"1adeb300-aa82-44dd-948d-acfb115098b3","level":13,"r":30,"y":1810,"x":380},{"name":"тошнота","label":"side_e","weight":5,"id":"038c954a-c386-4d63-aa63-fa25b7184142","level":13,"r":30,"y":1810,"x":460},{"name":"обморок","label":"side_e","weight":5,"id":"9bc707d2-4124-41c5-8145-e8fc89b924b3","level":13,"r":30,"y":1810,"x":540},{"name":"гиперемия кожа лицо","label":"side_e","weight":5,"id":"28c65e98-342d-49f6-90f0-60f300121ad8","level":9,"r":30,"y":1290,"x":480},{"name":"увеличение почечный кровоток","label":"action","weight":5,"id":"beaffb06-da2e-4f0c-990d-b93cb2fa6d68","level":9,"r":30,"y":1290,"x":560},{"name":"гиперкалиемия","label":"side_e","weight":5,"id":"ae492895-5fad-4b34-bca9-81dc9bc22364","level":7,"r":30,"y":1030,"x":680},{"name":"одышка","label":"side_e","weight":5,"id":"2d6153df-8d55-4251-b76d-518bf5db1b73","level":8,"r":30,"y":1160,"x":560},{"name":"желудочный-кишечный тракт","label":"absorbtion","weight":5,"id":"600cea4f-e956-4dfc-8715-21f7cec6848f","level":3,"r":30,"y":510,"x":5616.901408450704},{"name":"снижение ад систолический","label":"action","weight":5,"id":"6b2537b3-3da2-4306-90c3-e689ad22322e","level":11,"r":30,"y":1550,"x":600},{"name":"снижение ад диастолический","label":"action","weight":5,"id":"4fb0fbe5-3b3a-49c8-8c42-43659ddb9fbf","level":11,"r":30,"y":1550,"x":680},{"name":"снижать преднагрузка","label":"action","weight":5,"id":"a0708d08-ef9a-4123-aa20-2150d14d9a2f","level":10,"r":30,"y":1420,"x":320},{"name":"снижать постнагрузка","label":"action","weight":5,"id":"9a914038-3e67-452b-b53d-6f5a99b5570c","level":10,"r":30,"y":1420,"x":400},{"name":"восстановление эластичность крупный артерия","label":"action","weight":5,"id":"b3fcb6e0-d633-4502-8ee3-a7ce349fe71a","level":10,"r":30,"y":1420,"x":480},{"name":"восстановление структура сосудистый стенка мелкий артерия","label":"action","weight":5,"id":"c5d2d614-de3e-40fb-aad1-2491e834752d","level":10,"r":30,"y":1420,"x":560},{"name":"повышение активность калликреин-кининовый система тканевый","label":"mechanism","weight":5,"id":"2fe53ebb-d797-4f1e-a66f-4fa73517d025","level":6,"r":30,"y":900,"x":460},{"name":"повышение активность калликреин-кининовый система циркулировать","label":"mechanism","weight":5,"id":"7715b23d-f7f7-415a-9a83-45a86d28766a","level":6,"r":30,"y":900,"x":540}],"links":[{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"cae8d309-1bb4-4cb2-b10f-ccedfb9aa531"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"8d4889c3-0987-43ff-baf6-5a4e17350647"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"e65beadc-3c92-4aeb-b354-6bfa693cad79"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"fe3e18e5-35e7-40c3-bb30-0cf4f7419f8e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"50309380-6953-4fb4-94b8-4c249bd7f9d9"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ad93e813-6730-494d-9f30-87b12d06797e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"8d2f79b0-ddf4-4d2a-8281-9df636e320f5"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"4b095e2d-b9cb-4f57-90be-fa0f24c560ff"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"2e7f741d-beda-4cfe-87bb-83c4d988dbab"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"d8631928-85a4-4b75-bb76-f55fa3501639"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ffe34eda-7160-42af-9928-258e0d5026e4"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"4cab3704-2e1f-407e-bbca-b16a748d5a9c"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"8fe51640-0909-4ad2-8be1-19614e219aee"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"689f3141-d7f0-4527-88a4-c322b76cfe4a"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"56c9b376-3698-40c9-ac90-0113a045aa68"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"daef445a-ddd4-4ceb-9a62-b08d920ce228"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"de243ccc-4f90-4a7b-a117-38acc3b3b2ad"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"37a8e297-ad2e-48a6-9087-2cc709d747d0"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"837cee17-ac5a-4c51-9cde-7cb25ebacc42"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"1f456aa7-f73e-49b6-95e1-34c5d90ca6af"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"bbc5dc52-b762-4322-b8f8-8a5c7bf542e4"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"74670b32-50a1-4165-9bb5-693272d4390e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"cb484758-b284-42a6-887b-31eb82f156cc"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"0b582f96-d371-415b-98d1-8e2230617a74"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ac7bebd3-3772-4348-b86a-af4feb217c91"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"f8b26f46-d3e9-4134-9008-e91a49f596fb"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"efb93634-bf38-4419-a11b-d6d5570762f3"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"9fac99ed-24b8-44c1-a8cc-c731cbb6e3db"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"8954a513-4d5d-4a10-866c-14c6fd0e7ab9"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"cb2326f8-e2e8-437d-a35b-3b2e3a340048"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"d847415a-088d-4b40-af72-798da05fc352"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ccdba2d3-2a15-43ee-b1ed-463f4a347a71"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"21788b8d-c008-476a-a926-27ded2bfa865"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"5fbc3c60-e098-4baf-bfd1-079e796f4fe1"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"9f099efb-765f-4fe2-a2cd-1036094f3c66"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"05f1a41b-1182-47b0-8041-5ca1351c0b1e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"0216d14a-bf70-47a9-89c8-8cead9d33231"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"d322b1f0-854b-459d-946b-80c55b1af551"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"646486dc-960d-41c4-88a2-c0e50765e819"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"aae63511-2a89-4718-a324-9e5136be693f"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"1f6adb05-440d-4a11-897f-44423fa49f3b"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"124f091a-b7d5-4665-a1d8-dc7642762aa9"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"3f486aee-8b72-4c4e-ac9d-08eb0c4792fa"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"0ef9929d-adfb-4c46-af37-9a0236734a91"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"39393c06-7063-43ec-809d-63aeee52206e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"e66f18b5-0a14-4e80-96b4-435942e28318"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"97f4d3a8-0e09-472f-b270-1c2efc84b7d6"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ea6f799b-9aeb-4428-bada-dd74da4b9252"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"a8e7f323-37e0-4abb-a446-2c63c9de51e2"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"eae7167e-ccfa-43ed-89ba-f028a5b9fe7e"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ccb7110f-1332-431f-ad23-f859b62ed085"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ef6d027d-c368-432c-a0df-6ffc6e8a7668"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"a35b8c50-71ae-4651-b02c-3b67658dc46a"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"2e1a3c07-1ab9-4bfb-af25-3a255597031f"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"1693b85e-b178-441b-938f-e09ee3b0987c"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"f4d8ffb2-8c50-450d-b311-b4eae4b1088f"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ac7e0a81-f10c-49d1-80a1-2e1b57ac6a56"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"ca556f75-6c9d-4e7c-8779-de39d1f956f6"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"836fc4db-6832-4355-a2f6-7b621764d814"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"0ad3fc42-709b-415f-8689-0a539eb922be"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"883f6b5d-5c85-4238-81b8-596022c18358"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"11257a16-626c-43e3-8885-9f163e131b87"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"bffd0209-c07e-4783-b10f-0b2602de11c1"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"53aeb358-e5c2-42e4-b3a1-08a1eac702cd"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"f1199867-5788-4b14-b52a-d0561c46f01d"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"c058b922-766e-4369-bd61-69fad1951021"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"915ccc02-36c9-459b-b918-f280d62363e8"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"17080f31-aa3e-451b-8fc5-1076efdf8490"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"cbf5ef95-d351-42ac-935c-c2127803bfaa"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"0aedb021-6667-405d-9554-fed871b556d9"},{"source":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68","target":"600cea4f-e956-4dfc-8715-21f7cec6848f"},{"source":"fc65abae-9877-4e9c-b71b-ac465d69fca8","target":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52"},{"source":"fc65abae-9877-4e9c-b71b-ac465d69fca8","target":"f09f78f2-16c6-4e0b-ad13-4f8ffbfb862e"},{"source":"0d359b4d-f4b5-4f37-8cd7-225b83332329","target":"90a81ce7-2b8d-44d9-a97d-042328a43676"},{"source":"0d359b4d-f4b5-4f37-8cd7-225b83332329","target":"a0708d08-ef9a-4123-aa20-2150d14d9a2f"},{"source":"0d359b4d-f4b5-4f37-8cd7-225b83332329","target":"9a914038-3e67-452b-b53d-6f5a99b5570c"},{"source":"0d359b4d-f4b5-4f37-8cd7-225b83332329","target":"b3fcb6e0-d633-4502-8ee3-a7ce349fe71a"},{"source":"0d359b4d-f4b5-4f37-8cd7-225b83332329","target":"c5d2d614-de3e-40fb-aad1-2491e834752d"},{"source":"0aedb021-6667-405d-9554-fed871b556d9","target":"92dae2b7-59cc-4858-bee7-7c9c2b386ee6"},{"source":"06b3dd5d-bc00-47e4-8630-3c37e8643f83","target":"820f139d-9f59-4a1d-880e-d2206dca7b2c"},{"source":"820f139d-9f59-4a1d-880e-d2206dca7b2c","target":"2bf5ce72-3e1f-4ff7-af42-f88ba4527e68"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"ba1123a3-0670-4c51-9955-1bb7c432622f"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"e27499e2-0c69-446a-a512-fd410612eb58"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"a0708d08-ef9a-4123-aa20-2150d14d9a2f"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"9a914038-3e67-452b-b53d-6f5a99b5570c"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"b3fcb6e0-d633-4502-8ee3-a7ce349fe71a"},{"source":"fbf394f0-cdf3-4126-bc8b-25c4bf4bce52","target":"c5d2d614-de3e-40fb-aad1-2491e834752d"},{"source":"5080ca6a-31eb-4423-8857-a274c04bb51c","target":"95b11002-149f-49f4-aa79-2fb1a42c5829"},{"source":"5080ca6a-31eb-4423-8857-a274c04bb51c","target":"7e478b6d-4773-4611-a768-1aa80378421e"},{"source":"5080ca6a-31eb-4423-8857-a274c04bb51c","target":"2d6153df-8d55-4251-b76d-518bf5db1b73"},{"source":"e27499e2-0c69-446a-a512-fd410612eb58","target":"ae492895-5fad-4b34-bca9-81dc9bc22364"},{"source":"e27499e2-0c69-446a-a512-fd410612eb58","target":"a0708d08-ef9a-4123-aa20-2150d14d9a2f"},{"source":"e27499e2-0c69-446a-a512-fd410612eb58","target":"9a914038-3e67-452b-b53d-6f5a99b5570c"},{"source":"e27499e2-0c69-446a-a512-fd410612eb58","target":"b3fcb6e0-d633-4502-8ee3-a7ce349fe71a"},{"source":"e27499e2-0c69-446a-a512-fd410612eb58","target":"c5d2d614-de3e-40fb-aad1-2491e834752d"},{"source":"f09f78f2-16c6-4e0b-ad13-4f8ffbfb862e","target":"2fe53ebb-d797-4f1e-a66f-4fa73517d025"},{"source":"f09f78f2-16c6-4e0b-ad13-4f8ffbfb862e","target":"7715b23d-f7f7-415a-9a83-45a86d28766a"},{"source":"cbf5ef95-d351-42ac-935c-c2127803bfaa","target":"fc65abae-9877-4e9c-b71b-ac465d69fca8"},{"source":"95b11002-149f-49f4-aa79-2fb1a42c5829","target":"0d359b4d-f4b5-4f37-8cd7-225b83332329"},{"source":"95b11002-149f-49f4-aa79-2fb1a42c5829","target":"beaffb06-da2e-4f0c-990d-b93cb2fa6d68"},{"source":"95b11002-149f-49f4-aa79-2fb1a42c5829","target":"7ebf038b-d3de-4042-99c6-c1affacffad2"},{"source":"95b11002-149f-49f4-aa79-2fb1a42c5829","target":"28c65e98-342d-49f6-90f0-60f300121ad8"},{"source":"95b11002-149f-49f4-aa79-2fb1a42c5829","target":"6ef24d75-1d29-43b8-a8bc-ec8c8ff00a34"},{"source":"4cbc0041-822f-4596-8e36-de9dbec4c294","target":"cf0298d9-e808-4174-9c23-17fe8e0e8cfb"},{"source":"4cbc0041-822f-4596-8e36-de9dbec4c294","target":"1adeb300-aa82-44dd-948d-acfb115098b3"},{"source":"4cbc0041-822f-4596-8e36-de9dbec4c294","target":"038c954a-c386-4d63-aa63-fa25b7184142"},{"source":"4cbc0041-822f-4596-8e36-de9dbec4c294","target":"9bc707d2-4124-41c5-8145-e8fc89b924b3"},{"source":"038c954a-c386-4d63-aa63-fa25b7184142","target":"7b42c175-c7f5-441e-b6b6-dc641f670a32"},{"source":"6b2537b3-3da2-4306-90c3-e689ad22322e","target":"a311dd9e-95aa-493e-afe0-f2f07172b472"},{"source":"6b2537b3-3da2-4306-90c3-e689ad22322e","target":"4cbc0041-822f-4596-8e36-de9dbec4c294"},{"source":"4fb0fbe5-3b3a-49c8-8c42-43659ddb9fbf","target":"a311dd9e-95aa-493e-afe0-f2f07172b472"},{"source":"4fb0fbe5-3b3a-49c8-8c42-43659ddb9fbf","target":"4cbc0041-822f-4596-8e36-de9dbec4c294"},{"source":"a0708d08-ef9a-4123-aa20-2150d14d9a2f","target":"6b2537b3-3da2-4306-90c3-e689ad22322e"},{"source":"a0708d08-ef9a-4123-aa20-2150d14d9a2f","target":"4fb0fbe5-3b3a-49c8-8c42-43659ddb9fbf"},{"source":"9a914038-3e67-452b-b53d-6f5a99b5570c","target":"6b2537b3-3da2-4306-90c3-e689ad22322e"},{"source":"9a914038-3e67-452b-b53d-6f5a99b5570c","target":"4fb0fbe5-3b3a-49c8-8c42-43659ddb9fbf"},{"source":"2fe53ebb-d797-4f1e-a66f-4fa73517d025","target":"5080ca6a-31eb-4423-8857-a274c04bb51c"},{"source":"7715b23d-f7f7-415a-9a83-45a86d28766a","target":"5080ca6a-31eb-4423-8857-a274c04bb51c"}],"name":["2bf5ce72-3e1f-4ff7-af42-f88ba4527e68"],"maxLevel":15,"levelsInfo":{"levelNodesCount":{"0":1,"1":1,"2":1,"3":71,"4":2,"5":2,"6":4,"7":2,"8":3,"9":5,"10":5,"11":2,"12":2,"13":4,"14":1}},"isParse":true}
            const window_params = {"width":1200,"height":600,"xStep":50,"yStep":100}

            console.log(graphData)

            

            if (graphData){
                const svg = d3.select("svg")
                svg.selectAll("*").remove() // Очистка предыдущего графа

                svg.attr("width",   window_params.width) //Устанавливает атрибут width
                .attr("height",   window_params.height)
                .append("g").attr('class', 'group') //добавляет новый элемент, тег которого передается в метод в качестве параметра

                const svgGroup = svg.select('g.group')

                // Масштабирование и перемещение
                const zoom = d3.zoom()
                .scaleExtent([0.1, 10])
                .on("zoom", (event)=>{ //Обновление позиционирования элементов при масштабировании
                    svgGroup.attr("transform", event.transform);
                });
                svg.call(zoom);


                const dragstarted = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0.3).restart(); // Увеличиваем "температуру" симуляции для более плавного движения
                    d.fx = d.x; // Фиксируем позицию узла
                    d.fy = d.y;
                }
                
                const dragged = (event, d)=>{
                    d.fx = event.x; // Обновляем фиксированные координаты узла
                    d.fy = event.y;
                }
                
                const dragended = (event, d)=>{
                    if (!event.active) simulation.alphaTarget(0); // Охлаждаем симуляцию после перетаскивания
                    d.fx = null; // Отпускаем узел, позволяя симуляции снова влиять на его позицию
                    d.fy = null;
                }

                // Создаем обработчик drag
                const drag = d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended);


                // Определение маркера стрелки
                svgGroup.append("defs")
                .append("marker")
                .attr("id", "arrowhead")
                .attr("markerWidth", 5) //Размер области, в которой будет отображаться маркер
                .attr("markerHeight", 4)
                .attr("refX", nodeView.r+4)
                .attr("refY", 2)
                .attr("orient", "auto")
                .append("polygon")
                .attr("points", "0 0, 5 2, 0 4")
                .style("fill", colors.link);

                
                //Добавление ссылок
                let links = svgGroup.append("g").attr('class', 'links')
                .selectAll('.link')
                .data(graphData.links) //Добавление данных
                .enter() //Нужен для ввода дополнительных значений (так как data привязывает только первое)
                .append('path')
                .attr('class', 'link')
                .attr('stroke', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return colors.selectLink
                    return colors.link
                }) // Цвет линии ребра
                .attr('stroke-width', d=>{
                    //if((d.source.id === selectedNodes.sourseNode && d.target.id === selectedNodes.targetNode)||(d.target.id === selectedNodes.sourseNode && d.source.id === selectedNodes.targetNode)) return 2
                    return 1
                }) // Ширина линии ребра
                .attr("marker-end", "url(#arrowhead)") // Добавление стрелки в конец ребра
                .style('pointer-events', 'none') //(устанавливает стиль) Отключение событий на ребрах (клики и т.д.)

                // Создание узлов
                let nodes = svgGroup.append("g").attr('class', 'nodes')
                .selectAll('.node')
                .data(graphData.nodes)
                .enter()
                .append('g')
                .attr('class', 'node')
                .call(drag);

                nodes.append('circle')
                .attr('class', 'node')
                .attr('id', d => d.id)
                .attr('r', d => d.r) // Радиус узла
                .attr('fill', d=>{
                    //if(selectedNodes.sourseNode === d.id || selectedNodes.targetNode === d.id) return colors.selectNode
                    return colors.node
                }) // Цвет заполнения
                .attr("cursor", "pointer")
                .on('click', (event, d) => {
                    // Добавьте логику для обработки клика по узлу
                });

                //Отображение текста v2
                nodes.append('foreignObject')
                .attr('x', d => -d.r * 0.8)
                .attr('y', d => -d.r * 0.8)
                .attr('width', d => d.r * 1.6)
                .attr('height', d => d.r * 1.6)
                .append('xhtml:div')
                .style('display', 'flex')
                .style('justify-content', 'center')
                .style('align-items', 'center')
                .style('width', '100%')
                .style('height', '100%')
                .style('font-size', '5px')
                .style('text-anchor', 'middle')
                .style('word-wrap', 'break-word')
                .style('overflow', 'hidden')
                .style('pointer-events', 'none')
                .text(d => d.name);

                //Создание симуляции силы v3
                const simulation = d3.forceSimulation(graphData.nodes)
                // Связи между узлами
                .force("link", d3.forceLink(graphData.links).id(d => d.id))//.distance(nodeView.r*10)) //!!! Сила в зависимости от количества узлов в уровне!!!!!
                // Отталкивание узлов
                .force("charge", d3.forceManyBody(graphData.nodes).strength(d=>graphData.levelsInfo.levelNodesCount[d.level]*(-100)))//-3000))
                // Центрирование по x
                .force("center", d3.forceCenter( window_params.width / 2,  window_params.height / 2))
                // Выравнивание по уровням
                .force("y", d3.forceY().strength(6)
                    .y(d =>  window_params.height * ((d.level+1) / (graphData.maxLevel-1)))) //!!!!!!!!!!Уровень с большим числом узлов шире, чем с меньшим
                // Отталкивание по x в рамках одного уровня
                .force("x", d3.forceX().strength(0.05)
                    .x( window_params.width / 2))
                // Дополнительная сила для предотвращения наложения узлов
                .force("collision", d3.forceCollide().radius(40));

                // Обновление позиций узлов и связей при каждой итерации симуляции
                //Обновление симуляции
                simulation.on('tick', () => {
                    links.attr("d", d => `M${d.source.x},${d.source.y} L${d.target.x},${d.target.y}`);
                    nodes.attr('transform', d => `translate(${d.x}, ${d.y})`); // Правильная позиция для групп
                });
            }
        </script>
    </body>
</html>