{"ast":null,"code":"import map from \"./map\";\nexport default function () {\n  var keys = [],\n    sortKeys = [],\n    sortValues,\n    rollup,\n    nest;\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n    var i = -1,\n      n = array.length,\n      key = keys[depth++],\n      keyValue,\n      value,\n      valuesByKey = map(),\n      values,\n      result = createResult();\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n    valuesByKey.each(function (values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n    return result;\n  }\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array,\n      sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();else array = [], map.each(function (v, k) {\n      array.push({\n        key: k,\n        values: entries(v, depth)\n      });\n    });\n    return sortKey != null ? array.sort(function (a, b) {\n      return sortKey(a.key, b.key);\n    }) : array;\n  }\n  return nest = {\n    object: function (array) {\n      return apply(array, 0, createObject, setObject);\n    },\n    map: function (array) {\n      return apply(array, 0, createMap, setMap);\n    },\n    entries: function (array) {\n      return entries(apply(array, 0, createMap, setMap), 0);\n    },\n    key: function (d) {\n      keys.push(d);\n      return nest;\n    },\n    sortKeys: function (order) {\n      sortKeys[keys.length - 1] = order;\n      return nest;\n    },\n    sortValues: function (order) {\n      sortValues = order;\n      return nest;\n    },\n    rollup: function (f) {\n      rollup = f;\n      return nest;\n    }\n  };\n}\nfunction createObject() {\n  return {};\n}\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\nfunction createMap() {\n  return map();\n}\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}","map":{"version":3,"names":["map","keys","sortKeys","sortValues","rollup","nest","apply","array","depth","createResult","setResult","length","sort","i","n","key","keyValue","value","valuesByKey","values","result","get","push","set","each","entries","sortKey","v","k","a","b","object","createObject","setObject","createMap","setMap","d","order","f"],"sources":["C:/UsersFolders/Polina/РЭУ/Graph/view/node_modules/d3-collection/src/nest.js"],"sourcesContent":["import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}