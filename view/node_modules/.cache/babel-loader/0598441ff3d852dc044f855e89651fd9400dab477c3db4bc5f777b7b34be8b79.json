{"ast":null,"code":"const fetchScript = require('../../lib/fetch-script')();\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\nconst loadLoader = function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}();\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {\n    type: 'model'\n  },\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n    if (!src) {\n      return;\n    }\n    this.remove();\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded(gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {\n          format: 'gltf',\n          model: self.model\n        });\n      });\n    });\n  },\n  remove: function () {\n    if (!this.model) {\n      return;\n    }\n    this.el.removeObject3D('mesh');\n  }\n});","map":{"version":3,"names":["fetchScript","require","LOADER_SRC","loadLoader","promise","module","exports","AFRAME","registerComponent","schema","type","init","model","loader","loaderPromise","then","THREE","GLTFLoader","setCrossOrigin","update","self","el","src","data","remove","load","gltfLoaded","gltfModel","scene","animations","setObject3D","emit","format","removeObject3D"],"sources":["C:/UsersFolders/Polina/РЭУ/Graph/view/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js"],"sourcesContent":["const fetchScript = require('../../lib/fetch-script')();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,wBAAwB,CAAC,CAAC,CAAC;AAEvD,MAAMC,UAAU,GAAG,mFAAmF;AAEtG,MAAMC,UAAU,GAAI,YAAY;EAC9B,IAAIC,OAAO;EACX,OAAO,YAAY;IACjBA,OAAO,GAAGA,OAAO,IAAIJ,WAAW,CAACE,UAAU,CAAC;IAC5C,OAAOE,OAAO;EAChB,CAAC;AACH,CAAC,CAAC,CAAE;;AAEJ;AACA;AACA;AACA;AACAC,MAAM,CAACC,OAAO,GAAGC,MAAM,CAACC,iBAAiB,CAAC,mBAAmB,EAAE;EAC7DC,MAAM,EAAE;IAACC,IAAI,EAAE;EAAO,CAAC;EAEvBC,IAAI,EAAE,SAAAA,CAAA,EAAY;IAChB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,aAAa,GAAGX,UAAU,CAAC,CAAC,CAACY,IAAI,CAAC,MAAM;MAC3C,IAAI,CAACF,MAAM,GAAG,IAAIG,KAAK,CAACC,UAAU,CAAC,CAAC;MACpC,IAAI,CAACJ,MAAM,CAACK,cAAc,CAAC,WAAW,CAAC;IACzC,CAAC,CAAC;EACJ,CAAC;EAEDC,MAAM,EAAE,SAAAA,CAAA,EAAY;IAClB,MAAMC,IAAI,GAAG,IAAI;IACjB,MAAMC,EAAE,GAAG,IAAI,CAACA,EAAE;IAClB,MAAMC,GAAG,GAAG,IAAI,CAACC,IAAI;IAErB,IAAI,CAACD,GAAG,EAAE;MAAE;IAAQ;IAEpB,IAAI,CAACE,MAAM,CAAC,CAAC;IAEb,IAAI,CAACV,aAAa,CAACC,IAAI,CAAC,MAAM;MAC5B,IAAI,CAACF,MAAM,CAACY,IAAI,CAACH,GAAG,EAAE,SAASI,UAAUA,CAAEC,SAAS,EAAE;QACpDP,IAAI,CAACR,KAAK,GAAGe,SAAS,CAACC,KAAK;QAC5BR,IAAI,CAACR,KAAK,CAACiB,UAAU,GAAGF,SAAS,CAACE,UAAU;QAC5CR,EAAE,CAACS,WAAW,CAAC,MAAM,EAAEV,IAAI,CAACR,KAAK,CAAC;QAClCS,EAAE,CAACU,IAAI,CAAC,cAAc,EAAE;UAACC,MAAM,EAAE,MAAM;UAAEpB,KAAK,EAAEQ,IAAI,CAACR;QAAK,CAAC,CAAC;MAC9D,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAEDY,MAAM,EAAE,SAAAA,CAAA,EAAY;IAClB,IAAI,CAAC,IAAI,CAACZ,KAAK,EAAE;MAAE;IAAQ;IAC3B,IAAI,CAACS,EAAE,CAACY,cAAc,CAAC,MAAM,CAAC;EAChC;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}